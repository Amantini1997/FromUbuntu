<html><head><script data-dapp-detection="">!function(){let e=!1;function n(){if(!e){const n=document.createElement("meta");n.name="dapp-detected",document.head.appendChild(n),e=!0}}if(window.hasOwnProperty("ethereum")){if(window.__disableDappDetectionInsertion=!0,void 0===window.ethereum)return;n()}else{var t=window.ethereum;Object.defineProperty(window,"ethereum",{configurable:!0,enumerable:!1,set:function(e){window.__disableDappDetectionInsertion||n(),t=e},get:function(){if(!window.__disableDappDetectionInsertion){const e=arguments.callee;e&&e.caller&&e.caller.toString&&-1!==e.caller.toString().indexOf("getOwnPropertyNames")||n()}return t}})}}();</script><style type="text/css">.MathJax_Preview {color: #888; display: contents}
  #MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
  #MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
  .MathJax_Error {color: #CC0000; font-style: italic}
  </style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
  .MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
  </style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
  .MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
  .MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
  .MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
  .MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
  </style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
  .MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
  .MathJax .MJX-monospace {font-family: monospace}
  .MathJax .MJX-sans-serif {font-family: sans-serif}
  #MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
  .MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
  .MathJax:focus, body :focus .MathJax {display: inline-table}
  .MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
  .MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
  img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
  .MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none; box-sizing: content-box}
  .MathJax nobr {white-space: nowrap!important}
  .MathJax img {display: inline!important; float: none!important}
  .MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
  .MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
  .MathJax_Processed {display: none!important}
  .MathJax_test {font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow: hidden; height: 1px}
  .MathJax_test.mjx-test-display {display: table!important}
  .MathJax_test.mjx-test-inline {display: inline!important; margin-right: -1px}
  .MathJax_test.mjx-test-default {display: block!important; clear: both}
  .MathJax_ex_box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60ex}
  .MathJax_em_box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60em}
  .mjx-test-inline .MathJax_left_box {display: inline-block; width: 0; float: left}
  .mjx-test-inline .MathJax_right_box {display: inline-block; width: 0; float: right}
  .mjx-test-display .MathJax_right_box {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
  .MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
  .MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
  #MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
  @font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.9') format('opentype')}
  @font-face {font-family: MathJax_Main-bold; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.9') format('opentype')}
  @font-face {font-family: MathJax_Main-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.9') format('opentype')}
  @font-face {font-family: MathJax_Math-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.9') format('opentype')}
  @font-face {font-family: MathJax_Caligraphic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.9') format('opentype')}
  @font-face {font-family: MathJax_Size1; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.9') format('opentype')}
  @font-face {font-family: MathJax_Size2; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.9') format('opentype')}
  @font-face {font-family: MathJax_Size3; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.9') format('opentype')}
  @font-face {font-family: MathJax_Size4; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.9') format('opentype')}
  .MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
  </style><style type="text/css">@font-face {font-family: MathJax_Math-bold-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Math-BoldItalic.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Math-BoldItalic.otf?V=2.7.9') format('opentype')}
  </style><style type="text/css">@font-face {font-family: MathJax_AMS; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf?V=2.7.9') format('opentype')}
  </style></head><body data-new-gr-c-s-check-loaded="14.990.0" data-gr-ext-installed="" class="_toc-left"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div><link rel="stylesheet" type="text/css" href="chrome-extension://ckkdlimhmcjmikdlpkmbgfkaikojcbjk/themes/markdown7.css" id="_theme"><div id="_html" class="markdown-theme"><p>[TOC]</p>
  <style>
  img {
    border: solid 1px black;
  }
  
  h1:not(:first-of-type)::before {
      content: "";
      height: 100px;
      padding: 100px;
      display: block;
  }
  
  h2:not(:first-child)::before {
      content: "";
      height: 60px;
      padding: 0px;
      display: block;
  }
  
  h2:not(:first-child)::before {
      content: "";
      height: 30px;
      padding: 0px;
      display: block;
  }
  
  .no-mt {
      margin-top: -16px;
  }
  
  .warning {
      background: rgba(255, 0, 0, .3); 
      padding: 5px; 
      padding-left: 10px;
      margin: 20px 0; 
      border-left: solid 3px rgb(220, 0, 0);
  }
  
  .warning::before {
      content: "WARNING: ";
      font-weight: bold;
      color: rgb(220, 0, 0);
  }
  
  .definition {
      background: rgba(80, 80, 255, .2); 
      padding: 5px; 
      padding-left: 10px;
      margin: 20px 0; 
      border-left: solid 3px rgb(80, 80, 255);
  }
  
  .definition::before {
      content: "DEFINITION: ";
      font-weight: bold;
      color: rgb(80, 80, 255); 
  }
  
  .question {
      background: rgba(200, 200, 0, .2); 
      padding: 5px; 
      padding-left: 10px;
      margin: 20px 0; 
      border-left: solid 3px rgb(200, 200, 0);
  }
  
  .question::before {
      content: "QUESTION: ";
      font-weight: bold;
      color: rgb(200, 200, 0); 
  }
  </style>
  <h1 id="week-1-refresh-of-searching-algorithms"><a class="anchor" name="week-1-refresh-of-searching-algorithms" href="#week-1-refresh-of-searching-algorithms"><span class="octicon octicon-link"></span></a>WEEK 1 (Refresh of searching algorithms)</h1>
  <div class="definition"><b>Closed World Assumption :</b> Any fact not listed as explicitly being true in the initial state can safely be assumed as false.</div>
  <p>In PLANNING, 3 are the <strong>pillars</strong> to solve a problem:</p>
  <ul>
  <li>The initial state (what is True at the beginning);</li>
  <li>The goal (what has to be True at the end to consider the problem solved);</li>
  <li>The executable actions defined according to the DOMAIN</li>
  </ul>
  <p><strong>Lifted Action:</strong> when the :action contains :parameters</p>
  <p><strong>PLANNER:</strong> takes in an initial state and creates a plan to reach the goal state. It can be seen as an ordered list of actions
  telling what to do and when in order to reach the goal. To do this, it creates many plans and find the first or the
  most effective one.</p>
  <hr>
  <h2 id="searching-methods"><a class="anchor" name="searching-methods" href="#searching-methods"><span class="octicon octicon-link"></span></a>Searching Methods</h2>
  <p>When looking for the optimal plan, you can use different methods to find it:</p>
  <ul>
  <li><strong>Depth First Search</strong> (not very used as the path to the goal tends to be longer);</li>
  <li><strong>Breadth First Search</strong> (better than DFS, but not the best yet);</li>
  <li><strong>Best First Search</strong> which:
  <ul>
  <li>assigns a heuristic value h(S) to each new node;</li>
  <li>puts all the not visited nodes into a sorted queue, sorted by the h(S) (in case two nodes have the same h(S),the first one generated has higher priority);</li>
  <li>removes the first node in queue and visits it.</li>
  </ul>
  </li>
  <li><strong>A*</strong> which is like Best First Search, but takes into account the distance g(S) from the start, so it counts (and sum) both the distance to the goal and the distance from the initial state, that is, the number of actions performed so far (f(S) = h(S) + g(S)).</li>
  </ul>
  <p>Of course, you choose between BestFS and A* based on what is most convenient for you:</p>
  <ul>
  <li>A* -&gt; shorter distance from the initial state (so optimal path) is guaranteed;</li>
  <li>BestFS -&gt; less computations, but MIGHT result in a longer path g(S);</li>
  </ul>
  <blockquote>
  <h3 id="heuristic-cryteria">Heuristic Cryteria</h3>
  <div class="no-mt">A good heuristic value should be:</div>
  <ul>
  <li><strong>ADMISSIBLE:</strong> never overestimates the distance to a goal state;</li>
  <li><strong>CONSISTENT</strong> (Monotonic): at every state, the heuristic value must be less than or equal to the distance from that state to another state + the heuristic value of the other state     h(S) &lt;= h(S') + d(S, S');</li>
  <li><strong>ADDITIVE:</strong> (not necessary, but good for heuristic) given 2 heuristic functions h1 &amp; h2, their sum is <strong>admissible</strong> for each state s (i.e. h(s) = h1(s) + h2(s) ).</li>
  </ul>
  </blockquote>
  <p>A* is very good, but also "expensive", a good trade off comes with <strong>WA* (Weighted A* Search)</strong>, which finds a solution
  more quickly than the A*, but not necessarily the optimal solution. It lays between A* and BestFS:</p>
  <ul>
  <li>the formula is: f(S) = g(S) + W*h(S)</li>
  <li>when W is 2, the h(S) counts twice as much as it did before, making it more relevant than g(S)</li>
  <li>when W tends to Inf., WA* behaves like A*</li>
  <li>the W is the factor than influence the worst possible solution, i.e., if W = 2, the worst solution
  we can (not necessarily the one we will) find, is at most twice as much the best solution</li>
  </ul>
  <h1 id="week-2"><a class="anchor" name="week-2" href="#week-2"><span class="octicon octicon-link"></span></a>WEEK 2</h1>
  <p><strong>Delete Relaxation:</strong> Finding the a good heuristic can be tricky sometimes, <strong>RPG</strong> (or Relaxed Planning Graph) is very handy for that. It assumes that the actions only add and never delete predicates; in other words, <strong>delete relaxations remove only the delete effects of actions</strong>.</p>
  <blockquote>
  <p>i.e. an action that moves a box and outputs (on A B) (not (on A C)) would in fact only add (on A B), without deleting the other consequence. So doing, you create, step by step, the RPG, and going backward you create a possible solution. when you have al the table of facts, basically you look at the predicates, if it didn't exist in the previous state, you look at the action that generates it, and you consider it for the heuristic function</p>
  </blockquote>
  <h2 id="ehc-enforced-hill-climbing"><a class="anchor" name="ehc-enforced-hill-climbing" href="#ehc-enforced-hill-climbing"><span class="octicon octicon-link"></span></a>EHC (Enforced Hill Climbing)</h2>
  <p>RPG only provides heuristic scores, it's not a search method itself. However, EHC uses it to find the optimal solution. The way EHC works is pretty simple:</p>
  <ol>
  <li>look at h(s) of the generated states;</li>
  <li>from s, find the state s' with the best h(s') which has to be better than h(s)(h of the parent node) and expand it;</li>
  <li>keep doing it until no acceptable state can be found (this situation is called <strong>tableau</strong>);</li>
  <li>use <strong>Breadth First Search</strong> on all the child states (even the ones with the worst heuristic) until a state that meets the criteria from rule <strong>2</strong> is found;</li>
  </ol>
  <p>If EHC reaches a dead end, FF resorts and uses Best First Search to look for a plan.</p>
  <p><strong>EHC</strong> can find solutions pretty fast, but it is <strong>incomplete</strong>, that is, it is not guaranteed to find a solution.</p>
  <p><strong>FF</strong> on the other hand, is slower, but <strong>complete</strong>. It can be made more efficient by using the RPG and <strong>pruning</strong> some states; in particular, an action that leads to a goal in the first state is called <strong>helpful</strong>. In spite of making the algorithm faster, it also makes FF less complete.</p>
  <p>In case EHC fails, and (as far as I got from the lecture) so did FF due to pruning, we can try one more time using the <strong>helpful actions constraints</strong>, and see if it can find a solution before rolling back to FF.</p>
  <div class="warning"> the operator counting heuristic (<b>counting the number of actions used to reach the goal) isn't always admissible</b> (but that's not to say it's never admissible), <b>but the layer counting heuristic always is admissible</b></div>
  <blockquote>
  <p>The <strong>execution order</strong> is then the following:</p>
  </blockquote>
  <pre><code>1. **EHC with helpful actions**
  2. **EHC**
  3. **FF with helpful actions**
  4. **FF**
  </code></pre>
  <h2 id="landmarks-constraints-based-heuristic"><a class="anchor" name="landmarks-constraints-based-heuristic" href="#landmarks-constraints-based-heuristic"><span class="octicon octicon-link"></span></a>Landmarks: Constraints-based heuristic</h2>
  <p>An alternative to using RPG is to set constraints that encapsulate facets of every possible solution of a problem.</p>
  <p>Some of these constraints can be denoted as <strong>landmarks</strong> of the solution.</p>
  <ul>
  <li>Landmarks <strong>must be true</strong> at some point in every plan generated.</li>
  <li>They can include both facts and actions that will appear at some point.</li>
  <li>Landmarks can be <strong>ordered</strong> to dictate the order in which they should be achieved</li>
  </ul>
  <br>
  <h2 id="types-of-landmarks"><a class="anchor" name="types-of-landmarks" href="#types-of-landmarks"><span class="octicon octicon-link"></span></a>Types of landmarks</h2>
  <ul>
  <li>
  <h4 id="fact-landmark">Fact Landmark:</h4>
    <div style="margin-top: -16px">A variable takes a particular value in at least one state.</div>
  </li>
  <li>
  <h4 id="action-landmark">Action Landmark:</h4>
    <div style="margin-top: -16px">An action must be applied in the solution.</div>
  </li>
  <li>
  <h4 id="disjunction-action-landmarks">Disjunction Action Landmarks:</h4>
    <div style="margin-top: -16px">One of a set of possible actions must be applied.</div>
  </li>
  </ul>
  <blockquote>
  <p><strong>PROBLEM:</strong> Finding landmarks, however, can be demonstrated to be as hard a the problem itself, aka, <strong>PSPACE complex</strong>.</p>
  </blockquote>
  <br>
  <h2 id="finding-landmarks"><a class="anchor" name="finding-landmarks" href="#finding-landmarks"><span class="octicon octicon-link"></span></a>Finding Landmarks</h2>
  <div class="no-mt">There are many ways to do it:</div>
  <h3 id="deletion-relaxation-with-rpg"><a class="anchor" name="deletion-relaxation-with-rpg" href="#deletion-relaxation-with-rpg"><span class="octicon octicon-link"></span></a>Deletion relaxation with RPG</h3>
  <ul>
  <li>Iterate through all the actions and remove one that adds a fact;</li>
  <li>Build the RPG;</li>
  <li>If the goal no longer appears in the RPG, then that action is a landmark.</li>
  </ul>
  <blockquote>
  <p><strong>PROBLEM:</strong> Applying this process for all the possible actions is pretty slow.</p>
  </blockquote>
  <br>
  <h3 id="backchaining"><a class="anchor" name="backchaining" href="#backchaining"><span class="octicon octicon-link"></span></a>Backchaining</h3>
  <ul>
  <li>Consider every goal(B) <em>[in the goal state, I guess]</em> as a landmark:</li>
  <li>Look at the actions required to achieve B and the preconditions needed;</li>
  <li>If many actions needed to achieve B require A, than A can be considered as a landmark itself;</li>
  <li>Also, we know that A has to be achieved before B, this gives us a hint about the order</li>
  </ul>
  <p>This approach can be improved by checking whether is needed to achieve B for the first time .</p>
  <br>
  <h3 id="rpg-propagation"><a class="anchor" name="rpg-propagation" href="#rpg-propagation"><span class="octicon octicon-link"></span></a>RPG propagation</h3>
  <p>Consider an RPG and:</p>
  <ul>
  <li>each <strong>action</strong> takes into account <strong>the union</strong> of all the preconditions (even not from the very previous state) into account;
  <blockquote>
  <p>e.g suppose action <strong>5</strong> requires facts <strong>C {A}</strong> and <strong>D {A}</strong>, which are both achieved from a state <strong>A</strong>. In this case, action <strong>5</strong> considers the union <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mi>A</mi><mo>,</mo><mi>C</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo><mo>&amp;#x2229;</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mi>A</mi><mo>,</mo><mi>D</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 8.693em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.205em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1007.15em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mo" id="MathJax-Span-3" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math-italic;">A</span><span class="mo" id="MathJax-Span-5" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-7" style="font-family: MathJax_Main;">}</span><span class="mo" id="MathJax-Span-8" style="font-family: MathJax_Main; padding-left: 0.241em;">∩</span><span class="mo" id="MathJax-Span-9" style="font-family: MathJax_Main; padding-left: 0.241em;">{</span><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Math-italic;">A</span><span class="mo" id="MathJax-Span-11" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">D</span><span class="mo" id="MathJax-Span-13" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mi>A</mi><mo>,</mo><mi>C</mi><mo fence="false" stretchy="false">}</mo><mo>∩</mo><mo fence="false" stretchy="false">{</mo><mi>A</mi><mo>,</mo><mi>D</mi><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">\{A, C\} \cap \{A, D\}</script> = <strong>{A, C, D}</strong>.</p>
  </blockquote>
  </li>
  <li>each <strong>fact</strong> takes into account <strong>the intersection</strong> of the actions.
  <blockquote>
  <p>e.g. actions <strong>4 {A, B}</strong> and <strong>6 {A, D}</strong> are both necessary to achieve fact <strong>G</strong>, the intersection <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo>,</mo><mi>G</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo><mo>&amp;#x2229;</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mi>A</mi><mo>,</mo><mi>D</mi><mo>,</mo><mi>G</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-14" style="width: 11.61em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.646em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1009.59em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-15"><span class="mo" id="MathJax-Span-16" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math-italic;">A</span><span class="mo" id="MathJax-Span-18" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-19" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">B</span><span class="mo" id="MathJax-Span-20" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-21" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">G</span><span class="mo" id="MathJax-Span-22" style="font-family: MathJax_Main;">}</span><span class="mo" id="MathJax-Span-23" style="font-family: MathJax_Main; padding-left: 0.241em;">∩</span><span class="mo" id="MathJax-Span-24" style="font-family: MathJax_Main; padding-left: 0.241em;">{</span><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Math-italic;">A</span><span class="mo" id="MathJax-Span-26" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">D</span><span class="mo" id="MathJax-Span-28" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-29" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">G</span><span class="mo" id="MathJax-Span-30" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo>,</mo><mi>G</mi><mo fence="false" stretchy="false">}</mo><mo>∩</mo><mo fence="false" stretchy="false">{</mo><mi>A</mi><mo>,</mo><mi>D</mi><mo>,</mo><mi>G</mi><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-2">\{A, B, G\} \cap \{A, D, G\}</script> = <strong>{A, G}</strong></p>
  </blockquote>
  </li>
  </ul>
  <img src="./img/RPG_Landmarks.png">
  <p>In the example above, you can see that <strong>G</strong> is a goal state and that, to achieve it, <strong>A</strong> is the only fact necessary as it appears in all the actions required (intersection)</p>
  <hr>
  <br>
  <h2 id="landmarks-ordering"><a class="anchor" name="landmarks-ordering" href="#landmarks-ordering"><span class="octicon octicon-link"></span></a>Landmarks ordering</h2>
  <div style="margin-top: -16px">Having landmarks is definitely useful, but if we know in which order they should appear, this can be of much help.</div>
  <h3 id="sound-ordering"><a class="anchor" name="sound-ordering" href="#sound-ordering"><span class="octicon octicon-link"></span></a>Sound Ordering</h3>
  <div style="margin-top: -16px; margin-bottom: 16px;"> We know that A achieves B, but we don't know when exactly.</div>
  <ul>
  <li><strong>Necessary Ordering</strong> A →<sub>n</sub> B : A is always TRUE one step before B becomes TRUE;</li>
  <li><strong>Greedy Necessary Ordering</strong> A →<sub>gn</sub> B : A is TRUE one step before B becomes TRUE for the first time, rather than every time;</li>
  <li><strong>Natural Ordering</strong> A → B : A is TRUE some time before B becomes TRUE;</li>
  </ul>
  <blockquote>
  <p><em><strong>[My Guess]</strong></em> Both in Necessary and Greedy-Necessary Ordering A is a precondition for the action that achieves B. In Natural ordering A is used to achieve intermediate state that in turns are preconditions for actions that achieve B; hence, A is not required by the action the directly achieves B, but to reach its preconditions I need to achieve A at some point.</p>
  </blockquote>
  <h3 id="unsound-orderings"><a class="anchor" name="unsound-orderings" href="#unsound-orderings"><span class="octicon octicon-link"></span></a>Unsound Orderings</h3>
  <div style="margin-top: -16px; margin-bottom: 16px;"> There are special conditions on the ordering of landmarks.</div>
  <ul>
  <li><strong>Reasonable Ordering</strong> A →<sub>r</sub> B : If B was achieved before A, then the plan should <strong>delete B</strong> and re-achieve it after (or at the same time as) A;</li>
  </ul>
  <blockquote>
  <p>There are cases in which achieving B before A is a waste of time as one has to delete B, re-achieve A, and then again achieve B. However, there are cases, like the <em>Hanoi Tower</em>, where achieving,deleting, and eventually re-achieve B is necessary before reaching A.</p>
  </blockquote>
  <ul>
  <li><strong>Obedient Reasonable Ordering</strong> A →<sub>or</sub> B : If B was achieved before A, then the plan should <strong>delete B</strong> and re-achieve it after achieving A;</li>
  </ul>
  <blockquote>
  <p>e.g.: I need to deliver a parcel to a location. If B = <em>reaching the location</em>, and A = <em>collecting the parcel</em>, it makes no sense to achieve B before A.</p>
  </blockquote>
  <ul>
  <li>
  <ul>
  <li>We say that there is a reasonable ordering between A and B, written A →r B, if for every plan π where B is added at time i and A is first added at time j with i &lt; j [<em>A is added after B</em>],</li>
  </ul>
  </li>
  </ul>
  <pre><code>it holds that B is not true at some time m with m ∈ {i + 1, . . . , j} and B is true at some time k with j ≤ k.true at any time j ≤ i. 
    - We say that there is an obedient-reasonable ordering between A and B with regard to a set of orderings O, written A → &lt;sub&gt;or&lt;/sub&gt; B, if for every plan π obeying O where B is added at time i and A is first added at time j with i &lt; j, 
  it holds that B is not true at some time m with m ∈ {i + 1, . . . , j} and B is true at some time k with j ≤ k.
    - We say that a plan π obeys a set of orderings O, if for all orderings A →x B ∈ O, regardless of their type, it holds that A is first added at time i in π and B is not 
  </code></pre>
  <h1 id="week-3-landmarks"><a class="anchor" name="week-3-landmarks" href="#week-3-landmarks"><span class="octicon octicon-link"></span></a>WEEK 3 (Landmarks)</h1>
  <p>Landmarks can be used in 3 different ways:</p>
  <ul>
  <li>as <strong>planning subgoals</strong>;</li>
  </ul>
  <blockquote>
  <p>This is not optimal due to <strong>Susman anomaly</strong> which claims that 2 landmarks necessary to achieve the goal, can in a sense be mutually exclusive, and reaching one prevents us from reaching the other and vice versa.</p>
  </blockquote>
  <ul>
  <li>for <strong>heuristic estimates</strong>;</li>
  <li>for <strong>admissible landmarks heuristic</strong>.</li>
  </ul>
  <h2 id="lm-count"><a class="anchor" name="lm-count" href="#lm-count"><span class="octicon octicon-link"></span></a>LM Count</h2>
  <div class="definition"><b>LM</b> is a <b>Path Dependent Heuristic</b>, which is not a function of the current observed state, but rather the function of path used to reach it. It is <b>inadmissible</b> as the same state (like holding B) could be used to achieve multiple landmarks, even tho it's impossible.</div>    
  <p>LM heuristic value<code>h(s,p) where s is the state and p the path</code> is given by the union of incomplete landmarks with the ones required again.
  <img src="./img/LM_Count.png"></p>
  <h2 id="double-heuristic"><a class="anchor" name="double-heuristic" href="#double-heuristic"><span class="octicon octicon-link"></span></a>Double Heuristic</h2>
  <p>Having 2 heuristic functions might be very good:</p>
  <ul>
  <li>When you have a plateau with one, the other one might come in and rescue you;</li>
  <li>Alternating 2 heuristics (even <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-31" style="width: 1.67em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.372em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1001.25em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-32"><span class="mi" id="MathJax-Span-33" style="font-family: MathJax_Math-italic;">h</span><span class="mo" id="MathJax-Span-34" style="font-family: MathJax_Main;">(</span><span class="mo" id="MathJax-Span-35" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-3">h()</script> = random picking) helps improving the overall heuristic, and, hence, solving the plan.</li>
  </ul>
  <p><strong>EHC</strong> &amp; <strong>FF</strong> are know as <strong>Local Search algorithms</strong>:
  <img src="./img/Local_Search.png"></p>
  <blockquote>
  <p><strong>HEURISTICS ARE USED AT POINT 3</strong>
  Basically we are applying a <b>gradient descent</b></p>
  </blockquote>
  <h2 id="problems-with-rpg"><a class="anchor" name="problems-with-rpg" href="#problems-with-rpg"><span class="octicon octicon-link"></span></a>Problems With RPG</h2>
  <ul>
  <li>Not perfect;</li>
  <li>The right move may not lower the heuristic;</li>
  <li>The best move might prove to be wrong.</li>
  </ul>
  <h2 id="problems-with-ehc"><a class="anchor" name="problems-with-ehc" href="#problems-with-ehc"><span class="octicon octicon-link"></span></a>Problems With EHC</h2>
  <ul>
  <li>Can lead to a dead end and not find a soltuion;</li>
  <li>If FF fails, resort to systematic Best first search from the START!!;</li>
  <li>Searching on a plateau is expensive.</li>
  </ul>
  <h2 id="identidem"><a class="anchor" name="identidem" href="#identidem"><span class="octicon octicon-link"></span></a>IDENTIDEM</h2>
  <p>Alternative to EHC, it uses what are know as <strong>RESTARTS</strong></p>
  <ul>
  <li>When reaching a plateau, pick a random generated state (doesn't matter if it's worse than the best node so far);</li>
  <li>Explore it down for a maximum of d steps(d is set at the beginning);</li>
  <li>If it doesn't find an optimal solution, RESTART from the original node.</li>
  </ul>
  <blockquote>
  <p>If no good state is found at depth <strong>d</strong> , then <strong>increase d</strong> (d += 1)</p>
  </blockquote>
  <h1 id="week-4---numerical-values-in-planning"><a class="anchor" name="week-4---numerical-values-in-planning" href="#week-4---numerical-values-in-planning"><span class="octicon octicon-link"></span></a>Week 4 - Numerical Values in Planning</h1>
  <h2 id="numerical-values-operations-video-1"><a class="anchor" name="numerical-values-operations-video-1" href="#numerical-values-operations-video-1"><span class="octicon octicon-link"></span></a>Numerical Values Operations (Video 1)</h2>
  <p>Many planners allow for numerical values defined as functions</p>
  <blockquote>
  <p>e.g. <strong>(:functions (total-cost))</strong></p>
  </blockquote>
  <p>This values can be used for logical comparisons <code>&lt;, &lt;=, =, =&gt;, &gt;</code>, and mathematical operations <code>-, +, /, *</code></p>
  <blockquote>
  <p>e.g. <strong>(&lt; (height truck) (height barrier))</strong> or
  &nbsp;&nbsp; &nbsp; &nbsp; <strong>(&gt; (fuel) (* 2 (distance ?from ?to)))</strong></p>
  </blockquote>
  <p>It also possible to update values of functions with operators like <code>decrease, increase, assign</code></p>
  <blockquote>
  <p>e.g. <strong>(assign (battery-charge) (max-charge))</strong> or
  &nbsp;&nbsp; &nbsp; &nbsp; <strong>(decrease (fuel) (* 2 (distance ?from ?to)))</strong></p>
  </blockquote>
  <p>In the goal state, it is possible to ask the planner to either <strong>maximise</strong> or <strong>minimise</strong> one or a set of functions.</p>
  <blockquote>
  <p>e.g. <strong>(minize (total-cost))</strong></p>
  </blockquote>
  <h2 id="rpg"><a class="anchor" name="rpg" href="#rpg"><span class="octicon octicon-link"></span></a>RPG</h2>
  <p>To calculate the RPG is bit trickier. Actions with the effect of decreasing, which can be seen as a delete effect (you delete a unit), according to the normal RPG solution, should be ignored, but this might be misleading to the solution of the problem or, even worse, make it impossible to solve. The solution is to use <strong>bounds</strong>.</p>
  <p>Say we start with <code>(assign (money) 100)</code>, and operations may either decrease it or increase it. In the fact layer we write:</p>
  <blockquote>
  <p>money <strong>[100, 100]</strong>
  get-paid (gives you 10 money)
  buy-candy (takes 15 money away from you)</p>
  </blockquote>
  <p>meaning that the minimum amount of money (<strong>lower bound</strong>) at the moment is 100, and the maximum (<strong>upper bound</strong>) is 100 as well.
  Notice that there are 2 actions that can be executed, one increasing the money by 10, the other one reducing it by 15.
  In the next action layer, as the RPG commands, we execute both of them, but what happens to money?
  The upper bound increases by 10 and the lower bound decreases by 15.
  The next fact layer should look like this:</p>
  <blockquote>
  <p>money <strong>[85, 110]</strong>
  get-paid (gives you 10 money)
  buy-candy (takes 15 money away from you)</p>
  </blockquote>
  <p>The reason behind this is that if an action requires <strong>money &gt; 100</strong>, or <strong>money &lt;= 50</strong>, we look at both the upper and lower bounds, and if money required for the action falls into that range, we proceed with the execution of the action.</p>
  <h2 id="oversubscription-video-2"><a class="anchor" name="oversubscription-video-2" href="#oversubscription-video-2"><span class="octicon octicon-link"></span></a>Oversubscription (Video 2)</h2>
  <div class="definition"><b>Oversubscription:</b> when a planner has too many goals, and can only achieve some of them.</div>
  <h2 id="preferences"><a class="anchor" name="preferences" href="#preferences"><span class="octicon octicon-link"></span></a>Preferences</h2>
  <p>Preferences are condition we want to be true:</p>
  <ul>
  <li><strong>Simple Preferences</strong>: soft goal and preconditions</li>
  </ul>
  <blockquote>
  <p>(p0 (<strong>at end</strong> (at rover waypoint3)))</p>
  </blockquote>
  <ul>
  <li><strong>Trajectory Preferences</strong>: conditions on the plan</li>
  </ul>
  <blockquote>
  <p>(p0 ( <code>X</code> (<em>condition</em>))) where <code>X</code> can be:</p>
  <ul>
  <li><strong>always</strong> (&gt; (fuel) 50)</li>
  <li><strong>sometime</strong> (at driver warehouse)</li>
  <li><strong>at-most-once</strong> (at driver warehouse)</li>
  <li><strong>sometime-after</strong> (at B'ham) (at Glasgow)</li>
  <li><strong>sometime-before</strong> (at B'ham) (at Glasgow)</li>
  </ul>
  </blockquote>
  <p>These are known as <strong>soft constraints</strong>, which means the program can <strong>violate</strong> them, however, a cost is associated with the violation of them. This cost is calculated via the <strong>metric function</strong> in the formula of minimize/maximize (is-violeted p2).</p>
  <blockquote>
  <p>is-violated is a special function that triggers automatically at the end of the problem if a preference has not been satisfied</p>
  </blockquote>
  <p>Preferences are written in the in the problem file rather than the domain, and the formula is like this:</p>
  <blockquote>
  <p>e.g. (<strong>:constraints</strong> (and
  &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>(preference p0 (sometime (at amanda work)))</strong>
  &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>(preference p1 (sometime (at amanda piano)))</strong>
  &nbsp;&nbsp; &nbsp; &nbsp; ))</p>
  </blockquote>
  <h3 id="sometimes-before-vs-sometimes-after"><a class="anchor" name="sometimes-before-vs-sometimes-after" href="#sometimes-before-vs-sometimes-after"><span class="octicon octicon-link"></span></a>Sometimes-before vs. Sometimes-after</h3>
  <p>First of all, the way you read these preferences is different from other actions/preconditions:</p>
  <ul>
  <li>The precondition <strong>(at amanda work)</strong> is read as <em>"Amanda is at work"</em>, so the name of the action is moved to between the objects;</li>
  <li>The preference <strong>(sometimes-before (at amanda work) (drink coffee))</strong> is read as <em>"Amanda should drink a coffee before going to work"</em>. So the opposite of normal actions and objects</li>
  </ul>
  <p>Another thing to point out is <strong>violance</strong> of these two preferences:</p>
  <ul>
  <li><strong>sometime-before (a) (b)</strong> requires <strong>b</strong> to happen before <strong>a</strong> has ever happened. If I reach an <strong>E-VIO</strong> (or eternally violated) status, then this preference will never be satisfied. Vice versa, if I accomplish <strong>b</strong> anytime before achieving <strong>a</strong>, the preference is <strong>E-SAT</strong>(or eternally satisfied).</li>
  <li><strong>sometime-after (a) (b)</strong> requires <strong>b</strong> to happen after <strong>a</strong>, at any time. This means that, if I ever reach <strong>a</strong> before reaching <strong>b</strong>, I do reach an unsatisfied state, but it's not eternal. Vice versa, I can accomplish <strong>b</strong> after <strong>a</strong>, but as I can reach <strong>a</strong> again, the condition is satisfied, but not eternally.</li>
  </ul>
  <p>So, in essence, the two preferences are not the opposite of each other. Also, think at this examples:</p>
  <blockquote>
  <p>(sometimes-before (at amanda work) (drink coffee))
  This means that, <strong>IF</strong> Amanda goes to work, she must drink a coffee.</p>
  </blockquote>
  <p>In this example, Amanda is free to grab a coffee whenever she wants, and she has just one coffee and then go to work as many times as she wants.</p>
  <blockquote>
  <p>(sometimes-after (drink coffee) (at amanda work))
  This means that, <strong>IF</strong> she has drunk a coffee, <strong>then</strong> she has to go to work</p>
  </blockquote>
  <p>In this other example, Amanda can no longer drink coffees if she doesn't go to work afterwords, and here, if she takes a coffee, goes to work and <strong>THEN</strong> drinks another coffee, she will have to go to work <strong>again</strong>.</p>
  <h2 id="lprpg-p"><a class="anchor" name="lprpg-p" href="#lprpg-p"><span class="octicon octicon-link"></span></a>LPRPG-P</h2>
  <div class="definition"><b>LTL</b> is Linear Temporal Logic</div>
  <p>Create an automaton for each preference</p>
  <p><strong>PVC</strong> Preference violation cost of a state PVC(S) (Sum of violation cost of all the automata in E-Vio)</p>
  <p>The way to operate is:</p>
  <ol>
  <li>Set the best cost to ± <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x221E;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-36" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1000.96em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-37"><span class="mi" id="MathJax-Span-38" style="font-family: MathJax_Main;">∞</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">∞</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">\infty</script> (depending on the minimize/maximize metric)</li>
  <li>Find a solution plan, aka, a plan that achieves all the at-end goals;</li>
  <li>If the PVC(new solution) &gt; cost of the best plan so far, update the best cost; else, prune the plan and start again. <strong>REMEMBER:</strong> PVC is based only on E-Vio, not on unsatisfied preferences.</li>
  <li>Stop when it's clear that no more preferences can be achieved.</li>
  </ol>
  <p>One thing to mention is that, conversely to what said before, the <strong>sometime-after</strong> preference can be violated iff the after-action/fact is no longer achievable.
  <img src="./img/Preferences_automata.PNG"></p>
  <h3 id="lprpg-p-heuristic"><a class="anchor" name="lprpg-p-heuristic" href="#lprpg-p-heuristic"><span class="octicon octicon-link"></span></a>LPRPG-P Heuristic</h3>
  <p>In a plan with no hard goals (at-end), but only soft-goals, the heuristic is 0 for each state, as no actual goal exists.</p>
  <p>When creating the RPG, beside keeping track of true facts, we also consider the set of preferences violated by achieving this fact at this layer.</p>
  <h6 id="the-preferences-violation-set-of-a-subsequently-appearing-fact-is-the-violation-set-of-the-action-that-achieved-that-fact-and-the-union-of-the-violation-set-for-the-precondition-of-that-action"><a class="anchor" name="the-preferences-violation-set-of-a-subsequently-appearing-fact-is-the-violation-set-of-the-action-that-achieved-that-fact-and-the-union-of-the-violation-set-for-the-precondition-of-that-action" href="#the-preferences-violation-set-of-a-subsequently-appearing-fact-is-the-violation-set-of-the-action-that-achieved-that-fact-and-the-union-of-the-violation-set-for-the-precondition-of-that-action"><span class="octicon octicon-link"></span></a>The preferences violation set of a subsequently appearing fact is the violation set of the action that achieved that fact and the Union of the violation set for the precondition of that action.</h6>
  <p>After achieving a fact, if we can find another path which preferences violation set has a lower cost, we use that set instead.</p>
  <h1 id="week-5---optimal-planning-first-part-is-continuous-of-week-3"><a class="anchor" name="week-5---optimal-planning-first-part-is-continuous-of-week-3" href="#week-5---optimal-planning-first-part-is-continuous-of-week-3"><span class="octicon octicon-link"></span></a>Week 5 - Optimal Planning (first part is continuous of Week 3)</h1>
  <h2 id="the-perils-of-expressivity-video-6-from-week-3"><a class="anchor" name="the-perils-of-expressivity-video-6-from-week-3" href="#the-perils-of-expressivity-video-6-from-week-3"><span class="octicon octicon-link"></span></a>The Perils of Expressivity (video 6 from week 3)</h2>
  <p><strong>Introducing more variables, predicates and actions exponentially increases in the number of possible states</strong>, so the complexity of a problem grows exponentially.</p>
  <p>Consider the <strong>Block world</strong> with 3 block (A, B, C), and all the possible predicates:</p>
  <blockquote>
  <p>A-On-B, B-On-Table, Clear-C, etc.</p>
  </blockquote>
  <p>There are <strong>12 predicates</strong> that can be <strong>either True or False</strong>, for a total of <strong><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>12</mn><mn>2</mn></msup></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-39" style="width: 1.729em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.134em, 1001.43em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-40"><span class="msubsup" id="MathJax-Span-41"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.96em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mn" id="MathJax-Span-42" style="font-family: MathJax_Main;">12</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.402em; left: 1.015em;"><span class="mn" id="MathJax-Span-43" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>12</mn><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-5">12^2</script> combinations</strong>.
  Just by adding a new block <strong>D</strong>, the total permutations would sum up to  <strong><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>22</mn><mn>2</mn></msup></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-44" style="width: 1.729em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.134em, 1001.43em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-45"><span class="msubsup" id="MathJax-Span-46"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.96em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mn" id="MathJax-Span-47" style="font-family: MathJax_Main;">22</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.402em; left: 1.015em;"><span class="mn" id="MathJax-Span-48" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>22</mn><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-6">22^2</script> combinations</strong>, which is a huge number.
  This meticulous description, which counts so many permutations, is known as the <strong>PERIL OF EXPRESSIVITY</strong>. Of course landmarks and heuristics help us canalise the planner to the right path and some configuration are not even reachable at the same time. However, this number can still be a problem, how should we deal with it?</p>
  <h3 id="--mutex-invariants"><a class="anchor" name="--mutex-invariants" href="#--mutex-invariants"><span class="octicon octicon-link"></span></a>- Mutex (Invariants)</h3>
  <p>For example, for a object it (should be) impossible to be in 2 places at the same time, so say there are 2 places <strong>home</strong> and <strong>Uni</strong>, then</p>
  <blockquote>
  <p><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xAC;</mo></mrow><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mi>t</mi><mo>&amp;#x2212;</mo><mi>H</mi><mi>o</mi><mi>m</mi><mi>e</mi><mspace width=&quot;.5em&quot; /><mo>&amp;#x22C0;</mo><mspace width=&quot;.5em&quot; /><mi>a</mi><mi>t</mi><mo>&amp;#x2212;</mo><mi>U</mi><mi>n</mi><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-49" style="width: 14.824em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.324em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1012.21em, 2.682em, -999.997em); top: -2.259em; left: 0em;"><span class="mrow" id="MathJax-Span-50"><span class="texatom" id="MathJax-Span-51"><span class="mrow" id="MathJax-Span-52"><span class="mo" id="MathJax-Span-53" style="font-family: MathJax_Main;">¬</span></span></span><span class="mo" id="MathJax-Span-54" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-55" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-57" style="font-family: MathJax_Main; padding-left: 0.241em;">−</span><span class="mi" id="MathJax-Span-58" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-61" style="font-family: MathJax_Math-italic;">e</span><span class="mspace" id="MathJax-Span-62" style="height: 0em; vertical-align: 0em; width: 0.479em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-63" style="font-family: MathJax_Size1; vertical-align: 0em; padding-left: 0.182em;">⋀</span><span class="mspace" id="MathJax-Span-64" style="height: 0em; vertical-align: 0em; width: 0.479em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">a</span><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-67" style="font-family: MathJax_Main; padding-left: 0.241em;">−</span><span class="mi" id="MathJax-Span-68" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">U<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mi" id="MathJax-Span-69" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-70" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-71" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.265em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>¬</mo></mrow><mo stretchy="false">(</mo><mi>a</mi><mi>t</mi><mo>−</mo><mi>H</mi><mi>o</mi><mi>m</mi><mi>e</mi><mspace width=".5em"></mspace><mo>⋀</mo><mspace width=".5em"></mspace><mi>a</mi><mi>t</mi><mo>−</mo><mi>U</mi><mi>n</mi><mi>i</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-7">¬ (at-Home \enspace \bigwedge \enspace at-Uni )</script></p>
  </blockquote>
  <p>The above formula is an <strong>INVARIANT</strong>, that is something that has to hold True throughout the execution of the problem.
  Beware, finding Invariants might be as hard as solving the problem.</p>
  <p>Referring to the blocks world, a mutex would be {A on B, C on B, clear B}, meaning that either B is clear or there's a block on top of it.</p>
  <h3 id="--finite-domain-representation-fdr"><a class="anchor" name="--finite-domain-representation-fdr" href="#--finite-domain-representation-fdr"><span class="octicon octicon-link"></span></a>- Finite Domain Representation (FDR)</h3>
  <p>In a <strong>FINITE DOMAIN REPRESENTATION</strong>, you declare a set of possible states (<strong>domain</strong>) a variable can assume. In the blocks world example:</p>
  <blockquote>
  <p>**above-B <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2208;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-72" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.491em, 1000.6em, 2.443em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-73"><span class="mo" id="MathJax-Span-74" style="font-family: MathJax_Main;">∈</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.139em; border-left: 0px solid; width: 0px; height: 0.861em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>∈</mo></math></span></span><script type="math/tex" id="MathJax-Element-8">\in</script> {a, c, nothing}</p>
  </blockquote>
  <p>above-C <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2208;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-75" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.491em, 1000.6em, 2.443em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-76"><span class="mo" id="MathJax-Span-77" style="font-family: MathJax_Main;">∈</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.139em; border-left: 0px solid; width: 0px; height: 0.861em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>∈</mo></math></span></span><script type="math/tex" id="MathJax-Element-9">\in</script> {a, b, nothing}
  above-A <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2208;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-78" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.491em, 1000.6em, 2.443em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-79"><span class="mo" id="MathJax-Span-80" style="font-family: MathJax_Main;">∈</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.139em; border-left: 0px solid; width: 0px; height: 0.861em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>∈</mo></math></span></span><script type="math/tex" id="MathJax-Element-10">\in</script> {b, c, nothing}**</p>
  <p>And this would already drastically reduce the configuration space to <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>3</mn><mn>3</mn></msup></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-81" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.193em, 1000.96em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-82"><span class="msubsup" id="MathJax-Span-83"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.48em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mn" id="MathJax-Span-84" style="font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.402em; left: 0.479em;"><span class="mn" id="MathJax-Span-85" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>3</mn><mn>3</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-11">3^3</script>. To make it complete we should also include the below-X variables. The count would increase to <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>6</mn><mn>3</mn></msup></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-86" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.134em, 1000.96em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-87"><span class="msubsup" id="MathJax-Span-88"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.48em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mn" id="MathJax-Span-89" style="font-family: MathJax_Main;">6</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.402em; left: 0.479em;"><span class="mn" id="MathJax-Span-90" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>6</mn><mn>3</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-12">6^3</script>, which is still good, and besides, this number can be reduced more by adding constraints such as above-X = Y AND below-Y = X, or by checking that 2 above-X do not share the same block (nothing doesn't count, which means 2 blocks can be clear at the same time).</p>
  <p>Given an FDR encoding you can always switch back to the normal propositions.</p>
  <h2 id="sas"><a class="anchor" name="sas" href="#sas"><span class="octicon octicon-link"></span></a>SAS+</h2>
  <p>A famous planner called <strong>SAS+</strong> uses FDR.
  We can express our SAS+ planning problem as a 4-tuple of <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3A0;</mo></mrow><mo>=&amp;lt;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x1D449;</mo></mrow><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x1D442;</mo></mrow><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x1D494;</mo></mrow><mn>0</mn><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x1D494;</mo></mrow><mo>&amp;#x2217;</mo><mo>&amp;gt;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-91" style="width: 10.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.813em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1008.75em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-92"><span class="texatom" id="MathJax-Span-93"><span class="mrow" id="MathJax-Span-94"><span class="mo" id="MathJax-Span-95" style="font-family: MathJax_Main;">Π</span></span></span><span class="mo" id="MathJax-Span-96" style="font-family: MathJax_Main; padding-left: 0.301em;">=<span style="font-family: MathJax_Main;">&lt;</span></span><span class="texatom" id="MathJax-Span-97" style="padding-left: 0.301em;"><span class="mrow" id="MathJax-Span-98"><span class="mo" id="MathJax-Span-99" style="font-family: MathJax_Math-italic;">V</span></span></span><span class="mo" id="MathJax-Span-100" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-101" style="padding-left: 0.182em;"><span class="mrow" id="MathJax-Span-102"><span class="mo" id="MathJax-Span-103" style="font-family: MathJax_Math-italic;">O</span></span></span><span class="mo" id="MathJax-Span-104" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-105" style="padding-left: 0.182em;"><span class="mrow" id="MathJax-Span-106"><span class="mo" id="MathJax-Span-107" style="font-family: MathJax_Math-bold-italic;">s</span></span></span><span class="mn" id="MathJax-Span-108" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-109" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-110" style="padding-left: 0.182em;"><span class="mrow" id="MathJax-Span-111"><span class="mo" id="MathJax-Span-112" style="font-family: MathJax_Math-bold-italic;">s</span></span></span><span class="mo" id="MathJax-Span-113" style="font-family: MathJax_Main;">∗</span><span class="mo" id="MathJax-Span-114" style="font-family: MathJax_Main; padding-left: 0.301em;">&gt;</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>Π</mo></mrow><mo>=&lt;</mo><mrow class="MJX-TeXAtom-ORD"><mo>𝑉</mo></mrow><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><mo>𝑂</mo></mrow><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><mo>𝒔</mo></mrow><mn>0</mn><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><mo>𝒔</mo></mrow><mo>∗</mo><mo>&gt;</mo></math></span></span><script type="math/tex" id="MathJax-Element-13">Π = <𝑉, 𝑂, 𝒔0, 𝒔∗></script> comprised of…</p>
  <ul>
  <li>
  <p>The <strong>set of all state variables</strong> <strong><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-115" style="width: 0.955em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.78em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-116"><span class="mi" id="MathJax-Span-117" style="font-family: MathJax_Math-italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.182em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-14">V</script></strong> (which can also be fluent or numeric values), each with their own associated domain of possible values.</p>
  <p>Any assignment of those variables to a value in their domain is known as an atom.</p>
  </li>
  <li>
  <p>The <strong>set of all operators</strong>, effectively replacing the actions.</p>
  </li>
  </ul>
  <p>This includes the name of the operator, and the partial variable assignments covering the preconditions and effects.
  An operator is a triple <strong>&lt;𝑛𝑎𝑚𝑒, 𝑝𝑟𝑒, 𝑒𝑓𝑓&gt;</strong>
  - <strong>Name</strong> of the operator
  - <strong>Pre</strong> and <strong>eff</strong> are partial variable assignments (preconditions and effects).</p>
  <ul>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>S</mi><mn>0</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-118" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1001.01em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-119"><span class="msubsup" id="MathJax-Span-120"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.66em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-121" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-122" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-15">S_0</script> which is the <strong>initial state</strong> and <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-123" style="width: 0.896em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.717em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1000.72em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-124"><span class="mi" id="MathJax-Span-125" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></span></span><script type="math/tex" id="MathJax-Element-16">S</script>* which is the <strong>goal state</strong>.  In the goal state definition and the preconditions and effects, we provide partial variable assignments.</li>
  </ul>
  <p>Given we are only interested in a given action in changing specific variables in the current collection of assignments V.  While also in the goal we’re only interested in whether certain conditions are true, much like before in PDDL where we’re not listing the entire state that we expect to happen.</p>
  <h3 id="sas-operations-conditions"><a class="anchor" name="sas-operations-conditions" href="#sas-operations-conditions"><span class="octicon octicon-link"></span></a>SAS+ Operations Conditions</h3>
  <p>In SAS there are 2 types of operation condition:</p>
  <ul>
  <li>
  <p><strong>prevail conditions</strong>:
  The value of a variable stays the same;
  When loading a package p1 onto a truck t1 at location l1:  &lt;t1,at-l1&gt;</p>
  </li>
  <li>
  <p><strong>pre_post conditions:</strong>
  The value of a variable changes from one value to another:
  When loading a package p1 onto a truck t1 at location l1: &lt;p1,at-l1,in-t1&gt;</p>
  </li>
  </ul>
  <h3 id="data-transition-graph-dtg"><a class="anchor" name="data-transition-graph-dtg" href="#data-transition-graph-dtg"><span class="octicon octicon-link"></span></a>Data Transition Graph (DTG)</h3>
  <p>It's just a graph of nodes and directed edges. Each node is a state and each edge is an action.</p>
  <div class="question"><br>What is the difference between that and a normal graph?<br>
  Why is this relevant to SAS+?<br> 
  <b>Answer:</b> This is a way of representing the problem from the perspective of just one variable.
  </div>
  <h2 id="pattern-databases-pdb-video-1-from-week-5"><a class="anchor" name="pattern-databases-pdb-video-1-from-week-5" href="#pattern-databases-pdb-video-1-from-week-5"><span class="octicon octicon-link"></span></a>Pattern Databases (PDB) (video 1 from week 5)</h2>
  <p>As we have seen, adding new variables massively increases the complexity which, however, can be reduced using constraints.</p>
  <p>What if we set the cost of the original problem by decomposing it into a set of <strong>sub-problems</strong>?</p>
  <ul>
  <li><strong>Solution costs to sub-problems</strong> will provide an <strong>admissible heuristic</strong> to solve the actual problem.</li>
  <li><strong>Heuristic calculation</strong> becomes <strong>very fast</strong> (database lookup).</li>
  <li><strong>Searching backwards</strong> from the goal, record costs of states.</li>
  <li>An <strong>expensive</strong> albeit <strong>one-time calculation</strong>.</li>
  </ul>
  <div class="definition">
  A <b>Target Pattern</b> is a partial specification of the goal state.
  </div>
  <h3 id="abstraction"><a class="anchor" name="abstraction" href="#abstraction"><span class="octicon octicon-link"></span></a>Abstraction</h3>
  <p><strong>ABSTRACTION</strong> is a fundamental concept wherein the problem is only <strong>partially considered</strong>. In hypothetic problem with:</p>
  <ul>
  <li>2 Trucks (A, B)</li>
  <li>2 Locations (L, R)</li>
  <li>1 Package</li>
  </ul>
  <img src="./img/Abstraction.png">
  <p>In this diagram, <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;lt;</mo><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><msub><mi>x</mi><mn>2</mn></msub><mo>,</mo><msub><mi>x</mi><mn>3</mn></msub><mo>&amp;gt;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-126" style="width: 7.384em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.134em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.491em, 1006.07em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-127"><span class="mo" id="MathJax-Span-128" style="font-family: MathJax_Main;">&lt;</span><span class="msubsup" id="MathJax-Span-129" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-130" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-131" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-132" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-133" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-134" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-135" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-136" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-137" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-138" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-139" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-140" style="font-family: MathJax_Main; padding-left: 0.301em;">&gt;</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&lt;</mo><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><msub><mi>x</mi><mn>2</mn></msub><mo>,</mo><msub><mi>x</mi><mn>3</mn></msub><mo>&gt;</mo></math></span></span><script type="math/tex" id="MathJax-Element-17"><x_1, x_2, x_3></script></p>
  <ul>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mn>1</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-141" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1001.01em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-142"><span class="msubsup" id="MathJax-Span-143"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-144" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-145" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 0.861em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-18">x_1</script> = package location {A, B, L, R}</li>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mn>2</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-146" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1001.01em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-147"><span class="msubsup" id="MathJax-Span-148"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-149" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-150" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 0.861em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-19">x_2</script> = truck A location {L, R}</li>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mn>3</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-151" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1001.01em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-152"><span class="msubsup" id="MathJax-Span-153"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-154" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-155" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 0.861em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-20">x_3</script> = truck B location {L, R}</li>
  </ul>
  <p>Applying an <strong>abstraction formula <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B1;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-156" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1000.6em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-157"><span class="mi" id="MathJax-Span-158" style="font-family: MathJax_Math-italic;">α</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>α</mi></math></span></span><script type="math/tex" id="MathJax-Element-21">\alpha</script></strong> we can abstract this problem into a simpler one.
  For example, we may only consider the problem from the point of view of the package, so <strong>we group the states</strong> based on the location of the package:
  <img src="./img/Abstraction_2.png"></p>
  <p>The obtained heuristic value (given <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B1;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-159" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.658em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1000.6em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-160"><span class="mi" id="MathJax-Span-161" style="font-family: MathJax_Math-italic;">α</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>α</mi></math></span></span><script type="math/tex" id="MathJax-Element-22">\alpha</script>) <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>h</mi><mi>&amp;#x03B1;</mi></msup><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-162" style="width: 2.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.908em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1001.79em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-163"><span class="msubsup" id="MathJax-Span-164"><span style="display: inline-block; position: relative; width: 1.134em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-165" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mi" id="MathJax-Span-166" style="font-size: 70.7%; font-family: MathJax_Math-italic;">α</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-167" style="font-family: MathJax_Main;">(</span><span class="mo" id="MathJax-Span-168" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>h</mi><mi>α</mi></msup><mo stretchy="false">(</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-23">h^\alpha()</script> from the initial state <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>s</mi><mn>0</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-169" style="width: 1.074em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1000.9em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-170"><span class="msubsup" id="MathJax-Span-171"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-172" style="font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-173" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 0.861em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-24">s_0</script> is</p>
  <blockquote>
  <p><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>&amp;#x03B1;</mi></mrow></msup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-174" style="width: 3.396em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.801em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1002.68em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-175"><span class="msubsup" id="MathJax-Span-176"><span style="display: inline-block; position: relative; width: 1.134em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-177" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="texatom" id="MathJax-Span-178"><span class="mrow" id="MathJax-Span-179"><span class="mi" id="MathJax-Span-180" style="font-size: 70.7%; font-family: MathJax_Math-italic;">α</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-181" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-182"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-183" style="font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-184" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-185" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mi>α</mi></mrow></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-25">h^{\alpha}(s_0)</script> = 2</p>
  </blockquote>
  <p>Let's see another case now, which is pretty similar to the one just mentioned, but where the packages are 2 and the truck is just 1. How would we abstract this problem?
  Well, a possible way would be to create 2 abstraction functions, one taking into account one package and the second one taking into account only the other one. The result would be like this:
  <img src="./img/Abstraction2.png"></p>
  <div style="width: 100vw; display: flex; flex-direction: row"> 
      <img src="./img/Abstraction2_p1.png" style="max-width: 50%">
      <img src="./img/Abstraction2_p2.png" style="max-width: 50%">
  </div>
  <h3 id="pros-and-cons-of-pdb"><a class="anchor" name="pros-and-cons-of-pdb" href="#pros-and-cons-of-pdb"><span class="octicon octicon-link"></span></a>Pros and Cons of PDB</h3>
  <p><strong>Pros:</strong></p>
  <ul>
  <li>Once the db has been created, the time needed to calculate the heuristic at any given time is constant as you just have to look at the db (<strong>lookup tables are super fast</strong>);</li>
  <li>The same db is <strong>reusable</strong> throughout the planning.</li>
  </ul>
  <p><strong>Cons:</strong></p>
  <ul>
  <li>Creating the db take a lot of time, so it's <strong>pretty slow</strong>;</li>
  <li><strong>Adding</strong> a new variable <strong>or changing</strong> a goal would require to <strong>build a brand new db</strong>.</li>
  </ul>
  <blockquote>
  <p>PDB are just one way of abstraction, other forms exist as well.</p>
  </blockquote>
  <h2 id="cost-partitioning-video-2-from-week-5"><a class="anchor" name="cost-partitioning-video-2-from-week-5" href="#cost-partitioning-video-2-from-week-5"><span class="octicon octicon-link"></span></a>Cost Partitioning (video 2 from week 5)</h2>
  <p>Given a problem, we can create multiple abstractions, each, perhaps, producing different heuristics. These heuristics can be compared, and the best one can be chosen. We denote this heuristic with</p>
  <blockquote>
  <p><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-186" style="width: 4.289em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.574em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.46em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-187"><span class="msubsup" id="MathJax-Span-188"><span style="display: inline-block; position: relative; width: 2.027em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-189" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="texatom" id="MathJax-Span-190"><span class="mrow" id="MathJax-Span-191"><span class="mi" id="MathJax-Span-192" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-193" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-194" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-195" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-196"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-197" style="font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-198" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-199" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-26">h^{max}(s_i)</script>
  <strong>Max</strong> in this case is referred to the one with the maximum score, which in fact is the best. Why? As we are assuming all the heuristic are admissable, we want to take the one with the highest score as it better represent the actual possible strategy.</p>
  </blockquote>
  <p>Another way of taking into account all the possible solutions is <strong>adding the different heuristics</strong> <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>a</mi><mi>d</mi><mi>d</mi></mrow></msup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-200" style="width: 4.051em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.336em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.193em, 1003.22em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-201"><span class="msubsup" id="MathJax-Span-202"><span style="display: inline-block; position: relative; width: 1.789em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-203" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="texatom" id="MathJax-Span-204"><span class="mrow" id="MathJax-Span-205"><span class="mi" id="MathJax-Span-206" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-207" style="font-size: 70.7%; font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-208" style="font-size: 70.7%; font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-209" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-210"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-211" style="font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-212" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-213" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.504em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mi>a</mi><mi>d</mi><mi>d</mi></mrow></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-27">h^{add}(s_i)</script>. However, even if both the <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-214" style="width: 4.289em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.574em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.46em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-215"><span class="msubsup" id="MathJax-Span-216"><span style="display: inline-block; position: relative; width: 2.027em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-217" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="texatom" id="MathJax-Span-218"><span class="mrow" id="MathJax-Span-219"><span class="mi" id="MathJax-Span-220" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-221" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-222" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-223" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-224"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-225" style="font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-226" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-227" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-28">h^{max}(s_i)</script> functions are admissible, their sum is <strong>very likely not to be admissible, and hence not additive</strong>.</p>
  <p>The best way to deal with this addition issue is given by the <strong>COST PARTITIONING</strong></p>
  <p>Here we are hoping to <strong>split the action costs</strong> – or more appropriately, partition them - <strong>among the heuristics</strong> in such a way that the total cost implied by the heuristic does not exceed the original action cost, thus <strong>ensuring it remains admissible</strong>.</p>
  <p>So in essence, we’re trying to ensure our suite of available heuristics is additive, such that we can ensure the summation of these heuristics is still admissible.</p>
  <p>The way you do that is if we have found the best values in one heuristics, <strong>we tweak the other heuristics</strong>.</p>
  <p>There are many Cost Partitioning approaches:</p>
  <h3 id="optimal-cost-partitioning"><a class="anchor" name="optimal-cost-partitioning" href="#optimal-cost-partitioning"><span class="octicon octicon-link"></span></a>Optimal Cost Partitioning</h3>
  <p>Given some possible actions such as those in the figure, you want to redistribute the cost of each action across both the graphs, so that if such a path is included in both <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-228" style="width: 4.289em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.574em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.46em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-229"><span class="msubsup" id="MathJax-Span-230"><span style="display: inline-block; position: relative; width: 2.027em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-231" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="texatom" id="MathJax-Span-232"><span class="mrow" id="MathJax-Span-233"><span class="mi" id="MathJax-Span-234" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-235" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-236" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-237" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-238"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-239" style="font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-240" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-241" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-29">h^{max}(s_i)</script>, then it's like if <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>a</mi><mi>d</mi><mi>d</mi></mrow></msup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-242" style="width: 4.051em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.336em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.193em, 1003.22em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-243"><span class="msubsup" id="MathJax-Span-244"><span style="display: inline-block; position: relative; width: 1.789em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-245" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="texatom" id="MathJax-Span-246"><span class="mrow" id="MathJax-Span-247"><span class="mi" id="MathJax-Span-248" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-249" style="font-size: 70.7%; font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-250" style="font-size: 70.7%; font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-251" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-252"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-253" style="font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-254" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-255" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.504em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mi>a</mi><mi>d</mi><mi>d</mi></mrow></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-30">h^{add}(s_i)</script> would count the action just at its original cost.</p>
  <p>Here is an example:
  <img src="./img/Optimal_Cost_Partitioning.png">
  As you can see, the final heuristic <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-256" style="width: 4.467em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.693em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.57em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-257"><span class="msubsup" id="MathJax-Span-258"><span style="display: inline-block; position: relative; width: 2.027em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.54em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-259" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="texatom" id="MathJax-Span-260"><span class="mrow" id="MathJax-Span-261"><span class="mi" id="MathJax-Span-262" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-263" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-264" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-265" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-266"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-267" style="font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-268" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-269" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mn>0</mn></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-31">h^{max}(s_0)</script> = 8, which is admissible.</p>
  <div class="question"><b>QUESTIONS:</b>
  <br>
  Is there a way to decide how to split the cost between the 2 graphs?
  <br>
  What if the same action (like the black line in the picture) is not present in both the graphs?
  </div>
  <hr>
  <h3 id="post-hoc-optimisation"><a class="anchor" name="post-hoc-optimisation" href="#post-hoc-optimisation"><span class="octicon octicon-link"></span></a>Post Hoc Optimisation</h3>
  <p>Another way is to use <strong>weights to weight each abstraction</strong>. The <strong>total SUM of the weight has to add up to 1</strong>. So doing we change the total value of each action by multiplying them by the weight allocated to that abstraction.
  Furthermore, we drop to 0 the cost of <strong>non relevant actions</strong>, those actions that do not help get us closer to the goal.
  <img src="./img/Post_Hoc_Optimasation.png"></p>
  <hr>
  <h3 id="greedy-zero-one-cost"><a class="anchor" name="greedy-zero-one-cost" href="#greedy-zero-one-cost"><span class="octicon octicon-link"></span></a>Greedy Zero One Cost</h3>
  <ul>
  <li>Take the first abstraction you bump into;</li>
  <li>Set to 0 the cost of non relevant actions;</li>
  <li>keep the others to their original value;</li>
  <li>For all the remaining abstractions, set to 0 the actions already considered (aka not set to 0) in at least one previous abstractions and repeat from the first point.</li>
  </ul>
  <p>The issue with this approach is that we may keep the cost for an action which would not use to reach the goal in a particular abstraction (look at the blue in h1, we use the green instead, yet we keep the cost to 4)</p>
  <img src="./img/Greedy_Zero_One_Cost.png">
  <hr>
  <h3 id="saturated-cost-partitioning"><a class="anchor" name="saturated-cost-partitioning" href="#saturated-cost-partitioning"><span class="octicon octicon-link"></span></a>Saturated Cost Partitioning</h3>
  <p>This is in a improvement over the Greedy Zero One Cost. The issue with the Blue action is resolved in a simple way, setting it to 0 would be we would choose that over green and we would reduce the heuristic by 1 (4 + 1) =&gt; (4 + 0). Not to change the final heuristic, we see the value of all the actions not used to find the best cost to the cost of the action(s) which achieve the same result.
  So in the example, <strong>green (1)</strong> is preferred over <strong>Blue (4)</strong>, but they both achieve the same state, so <strong>we drop blue cost to the same of green, so that Blue(1)</strong></p>
  <p>The remaining blue cost (3) is used in the next abstractions.
  <img src="./img/Saturated_Cost_Partitioning.png"></p>
  <hr>
  <h3 id="uniform-cost-partitioning"><a class="anchor" name="uniform-cost-partitioning" href="#uniform-cost-partitioning"><span class="octicon octicon-link"></span></a>Uniform Cost Partitioning</h3>
  <p>The cost of the relevant actions for more than one abstraction is evenly distributed across them. In the example, Black and Blue are both relevant to both the abstractions, so we split the cost of each (4) between the abstractions (2 + 2)</p>
  <p>The non relevant actions costs drop to 0.
  <img src="./img/Uniform_Cost_Partitioning.png"></p>
  <h2 id="graphplan-video-3-week-5"><a class="anchor" name="graphplan-video-3-week-5" href="#graphplan-video-3-week-5"><span class="octicon octicon-link"></span></a>GraphPlan (video 3 week 5)</h2>
  <p>A <strong>GraphPlan</strong> is pretty similar to the RPG, in fact, RPG is a simplification of the GraphPlan. The main difference is that RPG uses <strong>delete relaxation</strong>, that is, facts are never deleted.</p>
  <p>In a GraphPlan, as the fact deletion is taken into account, from an action layers there are two types of lines leading to the next fact layer:</p>
  <ul>
  <li>The standard straight black lines, indicating addition;</li>
  <li><strong>Red dashed lines indicating deletion</strong>;</li>
  </ul>
  <p>A valid plan from GraphPlan is one in which:</p>
  <ul>
  <li>Actions at the same level don’t interfere with one another.</li>
  <li>Each action’s preconditions are true at that point in the plan.</li>
  <li>Goals are satisfied at the end of the graph.</li>
  </ul>
  <img src="./img/GraphPlan.png">
  <p>To enforce these rules, GraphPlan considers <strong>Mutexes</strong>, so some actions are not possible. There are 3 types of mutexes:</p>
  <ul>
  <li>
  <p><strong>Interference</strong>: when 2 actions interfere with each other and <strong>the effect of one negates the precondition for the other</strong></p>
  <blockquote>
  <p>e.g. Moving the rocket away and loading; if I am loading, the precondition is <strong><code>at R L</code></strong>, but by <strong><code>moving R from L to P</code></strong> I delete <strong><code>at R L</code></strong>
  <img src="./img/Interference.png"></p>
  </blockquote>
  </li>
  <li>
  <p><strong>Competing Needs</strong>: where two actions become mutex because <strong>their preconditions are mutex with one another</strong>.</p>
  <blockquote>
  <p>As it is impossible for the Rocket to be in 2 places at the same time (mutex), the deriving facts are mutexes as well.
  <img src="./img/Competing_Needs.png"></p>
  </blockquote>
  </li>
  <li>
  <p><strong>Inconsistent Support</strong>: where two literals are mutex because <strong>all ways in which we can create them in the fact layer are also mutex</strong>.</p>
  </li>
  </ul>
  <p>The flow is the same as for RPG:</p>
  <ul>
  <li>you reach a layer where the goals are satisfied,</li>
  <li>then you <strong>do a back propagation</strong> to find a solution</li>
  <li>if it is found that's it, otherwise <strong>add a new layer to the graph and repeat</strong>.</li>
  </ul>
  <p>At level <strong>i</strong>, pick a <strong>non-mutex subset of actions</strong> that achieve the goals at level <strong>i+1</strong>.
  The preconditions of these actions become the goals at level i.</p>
  <p>Build the action subset by iterating over goals, choosing an action that has the goal as an effect.
  Use an action that was already selected if possible. Do forward checking on remaining goals.</p>
  <blockquote>
  <p>The actual plan generation process is pretty much what we saw with the RPG heuristic: iterate backwards finding actions that at first satisfy the goals at the final fact layer, then add those preconditions to the goal layer as we iterate backwards. Again we’re capable of picking any non-mutex subset of actions.  Hence in this example, we can safely load or unload both packages at the same time.  Given, when we execute it, we’re just going to pick one of them in an arbitrary fashion, it doesn’t matter which one we pick.  Provided they are both executed before the next set of actions, then everything will be valid.</p>
  </blockquote>
  <img src="./img/GraphPlan_Summary.png">
  <h2 id="sat-in-planning-video-4-from-week-5"><a class="anchor" name="sat-in-planning-video-4-from-week-5" href="#sat-in-planning-video-4-from-week-5"><span class="octicon octicon-link"></span></a>SAT in Planning (video 4 from week 5)</h2>
  <p>CSPs (constraints satisfaction problems) are easily convertible to one another and the solution to one can be, in turn, converted into the solution of another.
  The idea here is to convert the problem of planning into a SAT problem.</p>
  <p>In the context of planning, we’re trying to find a valid configuration of variables at different stages of the planning process such that it yields a true outcome, meaning that there is a combination of states, when put in the right order satisfy the constraints of the actions in the planning domain and enable us to transition from the initial state of the problem to the goal.</p>
  <p><strong>How do we convert planning to SAT?</strong>
  <br>
  Our problem can be expressed as</p>
  <blockquote>
  <p>𝝆 = (𝜮, 𝒔𝒊, 𝒔𝒈)</p>
  </blockquote>
  <p>Then we create clauses that describe how the variables can possibly change (actions). Denoting how a given variable will change between two time points <strong>t</strong> and <strong>t+1</strong>.
  Once we have these clauses, the trick is to find a SAT formula phi 𝝓 and we then aim to satisfy it.</p>
  <blockquote>
  <p>If 𝝓 is satisfiable, then a plan exists for the planning problem 𝝆 <br>
  Every possible solution for 𝝓 results in a different valid plan for 𝝆</p>
  </blockquote>
  <p>The time steps go from</p>
  <ul>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn><mtext mathcolor=&quot;red&quot;>\rArr</mtext><mi>T</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-270" style="width: 4.408em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.634em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.63em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-271"><span class="mn" id="MathJax-Span-272" style="font-family: MathJax_Main;">0</span><span class="mtext" id="MathJax-Span-273" style="font-family: MathJax_Main; color: red;">\rArr</span><span class="mi" id="MathJax-Span-274" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mtext mathcolor="red">\rArr</mtext><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-32">0 \rArr T</script> for the <strong>predicates</strong>, as at <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-33-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mn>0</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-275" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1001.01em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-276"><span class="msubsup" id="MathJax-Span-277"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.72em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-278" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-279" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-33">T_0</script> there exist some predicates already;</li>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn><mtext mathcolor=&quot;red&quot;>\rArr</mtext><mi>T</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-280" style="width: 4.408em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.634em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.63em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-281"><span class="mn" id="MathJax-Span-282" style="font-family: MathJax_Main;">1</span><span class="mtext" id="MathJax-Span-283" style="font-family: MathJax_Main; color: red;">\rArr</span><span class="mi" id="MathJax-Span-284" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mtext mathcolor="red">\rArr</mtext><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-34">1 \rArr T</script> for the <strong>actions</strong>, as the first actions has to be executed at <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-35-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>T</mi><mn>1</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-285" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1001.01em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-286"><span class="msubsup" id="MathJax-Span-287"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.72em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-288" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-289" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-35">T_1</script></li>
  </ul>
  <div class="definition"><b>Planning Horizon (<i>T</i> ):</b> is the last time step at which we execute an action. (this starts at 1 and is increased by 1 if the solution cannot be found)</div>
  <p>How do we know how much to set <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-290" style="width: 0.896em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.717em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.72em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-291"><span class="mi" id="MathJax-Span-292" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-36">T</script> to?</p>
  <blockquote>
  <p>we don't, it's a <strong>trial and error process</strong> wherein you keep pushing up the value for <strong>T</strong></p>
  </blockquote>
  <p>Part on which I explain how to write in SAT preconditions and effects</p>
  <h3 id="framing"><a class="anchor" name="framing" href="#framing"><span class="octicon octicon-link"></span></a>Framing</h3>
  <p>When writing the problem in the form of SAT, you have to write also what changes, but also <strong>what does not change</strong> as a result of the action, and this part is known as <strong>FRAMING</strong>.
  Two types of framing exist:</p>
  <ul>
  <li>
  <p><strong>Classical Frame Axioms</strong></p>
  <ul>
  <li>State which facts are not effected for each action.</li>
  <li>Must enumerate for all fact/action pairs where no the fact is not affected by the action.</li>
  <li>Relies on one action being executed per time-step so axioms can be applied.</li>
  </ul>
  </li>
  <li>
  <p><strong>Explanatory Frame Axioms</strong></p>
  <ul>
  <li>Instead of listing what facts are not changed, explain why a fact might have changed between two time steps.
  i.e. if a fact changes between 𝒊 and 𝒊+𝟏, then an action at step 𝒊 must have caused it.
  <blockquote>
  <p>Given the effects, you have to find out the action basically</p>
  </blockquote>
  </li>
  </ul>
  </li>
  </ul>
  <p>So <strong>(if I got this right)</strong>, in the first approach you write down what <strong>has not changes</strong> whereas in the second you you write down <strong>what did change</strong>x</p>
  <h4 id="explanatory-frame-axioms"><a class="anchor" name="explanatory-frame-axioms" href="#explanatory-frame-axioms"><span class="octicon octicon-link"></span></a>Explanatory Frame Axioms</h4>
  <p>Consider the Robot problem
  <img src="./img/robot.png">
  Following are a couple of example of <strong>Explanatory Frame Axios</strong></p>
  <blockquote>
  <p><strong>𝑎𝑡(𝑟1, 𝑙𝑜𝑐𝐵, 0) ∧ 𝑎𝑡(𝑟1, 𝑙𝑜𝑐𝐵, 1) ⟹ 𝑚𝑜𝑣𝑒(𝑟1, 𝑙𝑜𝑐𝐴, 𝑙𝑜𝑐𝐵, 0)</strong></p>
  </blockquote>
  <p><strong>¬ℎ𝑜𝑙𝑑𝑖𝑛𝑔(𝑙𝑒𝑓𝑡, 𝑏1,0) ∧ ℎ𝑜𝑙𝑑𝑖𝑛𝑔(𝑙𝑒𝑓𝑡, 𝑏1, 1) ⟹ 𝑝𝑖𝑐𝑘𝑢𝑝(𝑏1, 𝑙𝑒𝑓𝑡, 𝑟1, 𝑙𝑜𝑐𝐴, 0)</strong></p>
  <p>In this case if we look at the actions from the example, we identify that in order for the fact that r1 is not a location B on time step 0, but then is in the location at time step 1, then that must mean that the robot was part of a move action at time step 0.  Specifically the move action with r1 going from loc A to loc B.</p>
  <p>We still need to list all of the possibilities that could emerge at a given time step. Hence we're going to have a lot of facts changing between time steps, especially as the branching factor of the state space increases.</p>
  <p>However, this approach actually enables for parallelism in the planning process, given two actions could be executed in parallel if they have the same preconditions at time step t and their effects don’t conflict. You can spot parallelism is happening because there are other effects beside the ones of the action you are executing.
  [<em>"You can more easily identify this by catching whether or not an effect of one action appears within one of the explanatory frame axioms for an action that isn’t the action you’re running against."</em>]</p>
  <h4 id="exclusion-axioms"><a class="anchor" name="exclusion-axioms" href="#exclusion-axioms"><span class="octicon octicon-link"></span></a>Exclusion Axioms</h4>
  <p>As some actions may be conflicting, we have to enforce again the concept of <strong>mutex</strong></p>
  <ul>
  <li>
  <p><strong>Complete Exclusion Axiom</strong>: <em><strong>only one action at a time</strong></em>.
  These constraints will essentially enforce a <em><strong>total order plan</strong></em>, whereby if we list every possible exclusion axiom, then only one action can be executed at the same time step. This also makes sense in the context of our gripper example, given none of the action of picking up boxes or moving the robot can be executed on the same time step.</p>
  <blockquote>
  <p>¬ 𝑚𝑜𝑣𝑒(𝑟1, 𝑙𝑜𝑐𝐴, 𝑙𝑜𝑐𝐵, 0)  ∨ ¬ 𝑚𝑜𝑣𝑒(𝑟1, 𝑙𝑜𝑐𝐵, 𝑙𝑜𝑐𝐴, 0)</p>
  </blockquote>
  </li>
  <li>
  <p><strong>Conflict Exclusion Axiom</strong>: prevents invalid actions on the same timestep.</p>
  </li>
  </ul>
  <p>Two actions conflict if either <strong>their preconditions contradict or their preconditions are not consistent with their effects</strong>. This would allow us to solve plans with in a <em><strong>partial order</strong></em> fashion, which is a topic of a later chapter
  More on this topic partial order planning in another chapter.</p>
  <h1 id="week-6"><a class="anchor" name="week-6" href="#week-6"><span class="octicon octicon-link"></span></a>Week 6</h1>
  <h2 id="partial-ordering-planning---pop-video-1"><a class="anchor" name="partial-ordering-planning---pop-video-1" href="#partial-ordering-planning---pop-video-1"><span class="octicon octicon-link"></span></a>Partial Ordering Planning - POP (video 1)</h2>
  <p>So far we have seen all the plan as starting from the initial state and moving towards the goal state. This is known as <strong>forward search</strong> or progression search.
  There are however some planners that start from the goal state and move backwards; this planners operate a <strong>regression search</strong>.</p>
  <p>The idea behind this planners is to consider what actions could have lead to that state.</p>
  <blockquote>
  <p>In the example of the amazon driver that delivers a dvd to myHome, the goal state is (at myHome dvd).
  If we were to identify this a 3-tuple state <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;lt;</mo><mi>d</mi><mi>v</mi><mi>d</mi><mo>&amp;#x2212;</mo><mi>l</mi><mi>o</mi><mi>c</mi><mo>,</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>k</mi><mo>&amp;#x2212;</mo><mi>l</mi><mi>o</mi><mi>c</mi><mo>,</mo><mi>d</mi><mi>r</mi><mi>i</mi><mi>v</mi><mi>e</mi><mi>r</mi><mo>&amp;#x2212;</mo><mi>l</mi><mi>o</mi><mi>c</mi><mo>&amp;gt;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-293" style="width: 20.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 17.086em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1017.03em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-294"><span class="mo" id="MathJax-Span-295" style="font-family: MathJax_Main;">&lt;</span><span class="mi" id="MathJax-Span-296" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-297" style="font-family: MathJax_Math-italic;">v</span><span class="mi" id="MathJax-Span-298" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-299" style="font-family: MathJax_Main; padding-left: 0.241em;">−</span><span class="mi" id="MathJax-Span-300" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">l</span><span class="mi" id="MathJax-Span-301" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-302" style="font-family: MathJax_Math-italic;">c</span><span class="mo" id="MathJax-Span-303" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-304" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">t</span><span class="mi" id="MathJax-Span-305" style="font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-306" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-307" style="font-family: MathJax_Math-italic;">c</span><span class="mi" id="MathJax-Span-308" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-309" style="font-family: MathJax_Main; padding-left: 0.241em;">−</span><span class="mi" id="MathJax-Span-310" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">l</span><span class="mi" id="MathJax-Span-311" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-312" style="font-family: MathJax_Math-italic;">c</span><span class="mo" id="MathJax-Span-313" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-314" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-315" style="font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-316" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-317" style="font-family: MathJax_Math-italic;">v</span><span class="mi" id="MathJax-Span-318" style="font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-319" style="font-family: MathJax_Math-italic;">r</span><span class="mo" id="MathJax-Span-320" style="font-family: MathJax_Main; padding-left: 0.241em;">−</span><span class="mi" id="MathJax-Span-321" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">l</span><span class="mi" id="MathJax-Span-322" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-323" style="font-family: MathJax_Math-italic;">c</span><span class="mo" id="MathJax-Span-324" style="font-family: MathJax_Main; padding-left: 0.301em;">&gt;</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&lt;</mo><mi>d</mi><mi>v</mi><mi>d</mi><mo>−</mo><mi>l</mi><mi>o</mi><mi>c</mi><mo>,</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>k</mi><mo>−</mo><mi>l</mi><mi>o</mi><mi>c</mi><mo>,</mo><mi>d</mi><mi>r</mi><mi>i</mi><mi>v</mi><mi>e</mi><mi>r</mi><mo>−</mo><mi>l</mi><mi>o</mi><mi>c</mi><mo>&gt;</mo></math></span></span><script type="math/tex" id="MathJax-Element-37"><dvd-loc, truck-loc, driver-loc></script>
  As I do not care of the truck and the driver location, I write this predicates as <b>"?"
  </b> <img src="./img/regression_search.png">
  As you can see, the load action allows for multiple values of T, this is due to the fact that you do not know where the loading action happened, but you are just implying that it happened before (unload MH), that is, a partial order.</p>
  </blockquote>
  <div class="warning">Searching this way is not guaranteed to be faster and it is harder to find a good heuristic.
  </div> 
  <p>As there are many states that you can visit, the idea is to use <strong>Partial Order Planning (POP)</strong>, where we’re going to play within the plan space – a sort of lifted representation of the state model – and find actions we want to apply, but <strong>not dictate the order immediately</strong>.</p>
  <p>In fact, we’ll <strong>generate a partial order plan</strong>, after which the job is then to try and <strong>find the optimal solution that ensures their orderings</strong> are valid.</p>
  <p>So we begin with:</p>
  <ul>
  <li>initial state,</li>
  <li>goal state, and our</li>
  <li>the set of actions.</li>
  </ul>
  <p>We can then aim to find an action that addresses an unresolved goal much like before, and if it is satisfying what we’re trying to do, we add it to the plan, we add its preconditions as subgoals.  But we also add what is known as a <strong>causal link</strong>.</p>
  <div class="definition">
  A <b>causal link</b> is a special identifier that acknowledges which actions meet which preconditions of other actions.
  </div>
  <p>An example of causal link in the DVD problem is that, if I eventually want the drive to be at my home to unload the DVD, the truck has to drive from London to home; this action is a first causal link, but also the fact that London and my house have to be linked (aka the driver can drive from London to my house) is a causal link.</p>
  <p>We can then also consider <strong>bindings</strong>: which is ensuring that <strong>two actions use the same parameter</strong>, thus ensuring some <strong>continuity</strong>.</p>
  <blockquote>
  <p>e.g. loading a package and unloading a package at different points in the plan both use the same package or the same truck.</p>
  </blockquote>
  <p>And lastly, there are <strong>threats</strong>: threats are when the search process discovers that an <strong>existing ordering of actions will break bindings and causal links</strong>.  You can then resolve this by either promoting an action, meaning you move it to after the connection it threatens, or demotion, which moves it behind it. (by moving it means that an action has to be executed BEFORE or AFTER another action).</p>
  <h2 id="hierarchical-task-network---htnvideo-2"><a class="anchor" name="hierarchical-task-network---htnvideo-2" href="#hierarchical-task-network---htnvideo-2"><span class="octicon octicon-link"></span></a>Hierarchical Task Network - HTN(video 2)</h2>
  <p>What if, instead of considering all the possible actions and states, you group them together?
  This is the idea behind HTN wherein you try to accomplish big tasks altogether and to achieve that, you use methods.</p>
  <p><strong>Reframe the problem as follows:</strong>
  Consider <strong>tasks to complete instead of goals to satisfy</strong>.</p>
  <blockquote>
  <p>Tasks are a little more abstract than a typical planning problem.</p>
  </blockquote>
  <p>Use <strong>methods to decompose tasks into subtasks</strong>.</p>
  <blockquote>
  <ul>
  <li>Enable for gradual decompositions of complex task into smaller and more manageable tasks.</li>
  <li>A subtask could be a single action, or another method in and of itself.</li>
  <li>We enforce constraints of the problem in the method and actions.</li>
  </ul>
  </blockquote>
  <blockquote>
  <p>HTN can be seen as a 4-tuple:</p>
  </blockquote>
  <img src="./img/HTN_tuple.png">
  <p><strong>HTN planning defines two types of tasks.</strong></p>
  <ul>
  <li><strong>Primitive Tasks</strong>: Translate to single planning action (this are the only tasks that actually change the state because they translate directly into actions from the planning domain).</li>
  <li><strong>Compound Tasks</strong>: Translate into a collection of one or more tasks.</li>
  </ul>
  <blockquote>
  <p>Methods can be used to group together multiple actions, but also to add constraints to the original action. Given this, a compound method can translate into a single action, but adding constraints.</p>
  </blockquote>
  <p><strong>Planning Process:</strong></p>
  <ul>
  <li>Recursively refine each task into subtasks.</li>
  <li>Ensure tasks can then be grounded with literals.</li>
  </ul>
  <h3 id="htn-is-updown-rather-than-backwardforward"><a class="anchor" name="htn-is-updown-rather-than-backwardforward" href="#htn-is-updown-rather-than-backwardforward"><span class="octicon octicon-link"></span></a>HTN is Up/Down rather than Backward/Forward</h3>
  <img src="./img/HTN_Search.png">
  <div class="warning">When you break down the tasks it is important to take into account the current world state as the actions eventually follow a <b>total ordering of tasks</b> (you can see this in the above picture where task t<sub>M</sub> happens before task t<sub>N</sub></div>
  <p>The reason why total ordering is an issue is represented in this problem:
  <img src="./img/HTN_ordering.png"></p>
  <p>That said, partial ordering requires a more complex algorithm to achieve it.</p>
  <p>HTN is a general concept, what we have seen here is <strong>Simple Task Network (STN) Planning</strong>, which is a subset of HTN.</p>
  <p>All the classical planning can be converted into HTN in P TIME, but <strong>not</strong> all HTN problems can be expressed in classical planning.</p>
  <h2 id="planning-under-uncertainty-video-3"><a class="anchor" name="planning-under-uncertainty-video-3" href="#planning-under-uncertainty-video-3"><span class="octicon octicon-link"></span></a>Planning under uncertainty (video 3)</h2>
  <div class="definition"><b>Markov property:</b> The probability distribution of transitioning from state <b>s</b> to any successor <b>s'</b> is only determined by <b>s</b></div>
  <p>You are said to be <strong>planning under uncertainty</strong> the transitions and the reward functions are know and the state are fully observable.</p>
  <p>If any of these elements is not available, you are doing <strong>reinforcement learning</strong> instead.</p>
  <p><strong>(video 4)</strong>
  Suppose now that you do not know what state you are in, but, using observations, you can assume which states you are possibly in.
  This situation is still a MDP, but with <strong>partial observability (POMDP)</strong> and still uncontrolled decisions (<strong>Hidden Markov Model</strong>).</p>
  <p>What you do in these cases is you create a <strong>belief vector</strong> which is a vector of length equal to the number of possible states, and each cell contains the probability for the agent to be in that state.</p>
  <p>In the canonical example of (.8 .1 .1 chances of move and -.04 reward per move) the belief vector would start as 1/9 value on each cell, that is the agent has 1/9 possibility to be in that state, but 0 in the final cells (-1 and +1).</p>
  <p>As we said, you do not know where you are in, but you can use a <strong>sensor model</strong> <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><mi>o</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>s</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-325" style="width: 3.396em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.801em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1002.68em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-326"><span class="mi" id="MathJax-Span-327" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-328" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-329" style="font-family: MathJax_Math-italic;">o</span><span class="texatom" id="MathJax-Span-330"><span class="mrow" id="MathJax-Span-331"><span class="mo" id="MathJax-Span-332" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-333" style="font-family: MathJax_Math-italic;">s</span><span class="mo" id="MathJax-Span-334" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>o</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>s</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-38">O(o|s)</script> for the probability of observations in the current state.
  Let's say you make an UP move and you observe that you have 1 and only 1 wall next to you. Given this you can update the belief vector so that it redistributes the probability correctly over those cells that, given that move, could allow you to reach a 1-wall cell.
  <img src="./img/belief_vector.png"></p>
  <blockquote>
  <p>the starred states indicates the possible state you may be in given that you are in a 1-wall cell.
  b(X) indicate the belief vector</p>
  </blockquote>
  <h1 id="week-7---temporal-planning"><a class="anchor" name="week-7---temporal-planning" href="#week-7---temporal-planning"><span class="octicon octicon-link"></span></a>Week 7 - Temporal Planning</h1>
  <p><strong>(video 1)</strong>
  In <strong>temporal planning</strong> there are some differences from the standard PDDL notation:</p>
  <ul>
  <li><strong>:action</strong> is named <strong>:durative-action</strong>;</li>
  <li>a new line called <strong>:duration</strong> indicates the duration of the actions;</li>
  <li>the <strong>:precondition</strong> statement is replaced by <strong>:condition</strong></li>
  <li>conditions and effects are preceded by a temporal specifier such as: <code>over all</code>, <code>at start</code>, <code>at end</code>...</li>
  </ul>
  <img src="./img/7_durative_action.png">
  <h2 id="overlapping"><a class="anchor" name="overlapping" href="#overlapping"><span class="octicon octicon-link"></span></a>Overlapping</h2>
  <p>When defining an action in the domain we may want to avoid <strong>overlapping</strong>, that is, prevent the same action to be achieved with different variables.</p>
  <blockquote>
  <p>e.g. <em>parcel1</em> is at <em>location1</em>, <em>truck1</em> loads it, then a second truck should not be able to load the very same parcel.</p>
  </blockquote>
  <p>However, due to the temporal nature, when the conditions are specified in the wrong manner, this kind of issue may arise.
  Consider the previous image, if the effect <code>(not (at ?obj ?loc)</code> were written as <code>at end</code> instead of <code>at start</code>, another truck could have come and pick the same parcel, which is obviously wrong.</p>
  <p>Another thing to be aware of in temporal planning is that the effect part does not respect the order in which you write facts, rather, it first apply deletion and then additions.
  So say you write:</p>
  <blockquote>
  <p>:condition (and
  &nbsp; &nbsp; &nbsp; &nbsp; (at end (at ?obj ?loc))
  &nbsp; &nbsp; &nbsp; &nbsp; (at end (not (at ?obj ?loc))) )</p>
  </blockquote>
  <p>In spite the last thing you specify is to remove the obj from the location, the planner would actually do that as first thing, so the obj will end up still being at the location.</p>
  <h2 id="snap-actions"><a class="anchor" name="snap-actions" href="#snap-actions"><span class="octicon octicon-link"></span></a>Snap actions</h2>
  <p><strong>(video 2)</strong></p>
  <p>So far we have have always assumed actions were <strong>compressed</strong>, so the start and the end of an action belong with the same block.</p>
  <p>What we do in temporal planning is to decompose a durative action into <strong>snaps</strong>:</p>
  <ul>
  <li><strong>start snaps</strong> <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x22A2;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-335" style="width: 0.717em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1000.54em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-336"><span class="mo" id="MathJax-Span-337" style="font-family: MathJax_Main;">⊢</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>⊢</mo></math></span></span><script type="math/tex" id="MathJax-Element-39">\vdash</script>;</li>
  <li><strong>invariant snaps</strong> <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathcolor=&quot;red&quot;>\lrArr</mtext></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-338" style="width: 3.217em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.682em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1002.68em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-339"><span class="mtext" id="MathJax-Span-340" style="font-family: MathJax_Main; color: red;">\lrArr</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathcolor="red">\lrArr</mtext></math></span></span><script type="math/tex" id="MathJax-Element-40">\lrArr</script> (stand for the <code>overall</code>); and</li>
  <li><strong>end snaps</strong> <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x22A3;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-341" style="width: 0.717em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1000.54em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-342"><span class="mo" id="MathJax-Span-343" style="font-family: MathJax_Main;">⊣</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>⊣</mo></math></span></span><script type="math/tex" id="MathJax-Element-41">\dashv</script>.</li>
  </ul>
  <p>Invariant snaps, as the name suggests, cannot change throughout the execution of the action.</p>
  <p>In PDDL, a goal is satisfied when, <u>after the actions performed have accomplished their effect</u>, the goal still exists.</p>
  <p>In STRIPS, where the actions are sequential, this is easy to check, but in temporal planning you might have an action A which accomplishes a goal and while this performs, another action B starts which eventually deletes the goal reached by A.</p>
  <p>In the below example, even if the goal has been achieved, this doesn't count because an action that already started (B) deletes this goal.
  <img src="img/7_interference.png"></p>
  <blockquote>
  <p>In this picture, B started before reaching the end of A and eventually deletes the GOAL achieved by A.</p>
  </blockquote>
  <p>In the previous picture, invariants were not included for simplicity, but how do we add them?</p>
  <p>The idea is to create a sequential order:
  <img src="img/7_invariant.png"></p>
  <p>So that A_start (As) sets the preconditions for A_invariant as <strong>As</strong>, then A_invariant deletes As (<strong>¬As</strong>) and sets the preconditions for A_end (<strong>Ai</strong>), eventually A_end deletes Ai (<strong>¬Ai</strong>).</p>
  <p>Breaking down the problem this way creates an issue though, that is during the execution of an invariant, we could change some facts and have them returning as normal before the end of such invariant</p>
  <blockquote>
  <p>e.g. the truck must be at location L overall, instead I drive it away and drive it back before the end of the temporal action.</p>
  </blockquote>
  <p>The solution is to say that, in every state where <strong>As</strong> is true, <strong>inv_A</strong> must also be true, and breaking this condition results in a <strong>dead-end</strong>.</p>
  <p>How do we tackle the temporal problem then? Well, there are some options:</p>
  <h3 id="1-decision-epoch-planning"><a class="anchor" name="1-decision-epoch-planning" href="#1-decision-epoch-planning"><span class="octicon octicon-link"></span></a>1. Decision Epoch Planning</h3>
  <p>An approach to temporal planning could be as following:
  <br>
  <img src="img/7_decision_epoch_planning.png"></p>
  <p>What this means is we reason in terms of state <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>S</mi><mi>t</mi></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-344" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1000.96em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-345"><span class="msubsup" id="MathJax-Span-346"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.098em, 1000.66em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-347" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mi" id="MathJax-Span-348" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mi>t</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-42">S_t</script> where <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-349" style="width: 0.479em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.36em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.3em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-350"><span class="mi" id="MathJax-Span-351" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-43">t</script> indicates the time stamp.
  After executing any actions snap_start, we insert the action snap_end in a priority queue <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>Q</mtext></mrow></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-352" style="width: 1.074em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1000.84em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-353"><span class="texatom" id="MathJax-Span-354"><span class="mrow" id="MathJax-Span-355"><span class="mtext" id="MathJax-Span-356" style="font-family: MathJax_Main-bold;">Q</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">Q</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-44">\textbf Q</script> with key the time at which it will terminate: <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>+</mo><mi>d</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mi>A</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-357" style="width: 8.455em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.027em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1006.91em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-358"><span class="mi" id="MathJax-Span-359" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-360" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="mi" id="MathJax-Span-361" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-362" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-363" style="font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-364" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-365" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-366" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-367" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-368" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-369" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-370" style="font-family: MathJax_Math-italic;">A</span><span class="mo" id="MathJax-Span-371" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo>+</mo><mi>d</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-45">t + duration(A)</script>;
  after starting an action, a minimum amount of time must elapse, we call that time <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-372" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-373"><span class="mi" id="MathJax-Span-374" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-46">\varepsilon</script> and we update the current time <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mtext mathcolor=&quot;red&quot;>\larr</mtext><mi>t</mi><mo>+</mo><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-375" style="width: 5.479em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.527em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1004.47em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-376"><span class="mi" id="MathJax-Span-377" style="font-family: MathJax_Math-italic;">t</span><span class="mtext" id="MathJax-Span-378" style="font-family: MathJax_Main; color: red;">\larr</span><span class="mi" id="MathJax-Span-379" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-380" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="mi" id="MathJax-Span-381" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mtext mathcolor="red">\larr</mtext><mi>t</mi><mo>+</mo><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-47">t \larr t +\varepsilon</script></p>
  <p>As an action reaches the end (and to do that it must be the first in queue), we set the current time to the action duration end (<span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>+</mo><mi>d</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mi>A</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-382" style="width: 8.455em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.027em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1006.91em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-383"><span class="mi" id="MathJax-Span-384" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-385" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="mi" id="MathJax-Span-386" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-387" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-388" style="font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-389" style="font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-390" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-391" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-392" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-393" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-394" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-395" style="font-family: MathJax_Math-italic;">A</span><span class="mo" id="MathJax-Span-396" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo>+</mo><mi>d</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-48">t + duration(A)</script>) + <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-397" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-398"><span class="mi" id="MathJax-Span-399" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-49">\varepsilon</script>.</p>
  <div class="warning">
      In order to do that, we must know the time required to complete an action beforehand. When we have a <b>inequality</b> in <b>:duration</b> we cannot operate this strategy.
  </div>
  <p>Another issue with Decision Epoch Planners is that if we have 2 actions <em>(C [duration = 10, action = wall] and D [duration = 1, action = open barrier])</em> and we want to start D right before the end of C, we cannot have the time progress without taking actions. As a result, we are forced to call D at time <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-50-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>t</mi><mi>C</mi></msub><mo>+</mo><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-400" style="width: 3.217em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.682em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1002.62em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-401"><span class="msubsup" id="MathJax-Span-402"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.36em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-403" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.36em;"><span class="mi" id="MathJax-Span-404" style="font-size: 70.7%; font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-405" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="mi" id="MathJax-Span-406" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.075em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>C</mi></msub><mo>+</mo><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-50">t_C + \varepsilon</script> as <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-407" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-408"><span class="mi" id="MathJax-Span-409" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-51">\varepsilon</script> is the only elapsed time.
  <img src="img/7_CD_epoch.png"></p>
  <p>So, in general, Decision Epoch planner can deal only with actions performing with a time distance of <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-52-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-410" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-411"><span class="mi" id="MathJax-Span-412" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-52">\varepsilon</script> and not an arbitrary <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-53-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-413" style="width: 0.717em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.61em, 1000.6em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-414"><span class="mi" id="MathJax-Span-415" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-53">n</script>.</p>
  <p>You could potentially tell the planner to have x times <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-54-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-416" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-417"><span class="mi" id="MathJax-Span-418" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-54">\varepsilon</script> elapsed, but this would hugely increase the search space and the overall performance would be very poor.</p>
  <p>You can change the value of <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-55-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-419" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-420"><span class="mi" id="MathJax-Span-421" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-55">\varepsilon</script> before the execution of the program, setting it to 1.01 instead of 0.01; this would reduce the search space drastically, but you can also overshoot and set it to 4 making it impossible to solve the problem.</p>
  <h3 id="2-simple-temporal-problem-stp"><a class="anchor" name="2-simple-temporal-problem-stp" href="#2-simple-temporal-problem-stp"><span class="octicon octicon-link"></span></a>2. Simple Temporal Problem (STP)</h3>
  <p>First off, the <strong>constraints</strong>:</p>
  <ul>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-56-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B5;</mo></mrow></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-422" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-423"><span class="texatom" id="MathJax-Span-424"><span class="mrow" id="MathJax-Span-425"><span class="mo" id="MathJax-Span-426" style="font-family: MathJax_Math-italic;">ε</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-56">ε</script> ≤ t(i+1) – t(i)      (c.f. <strong>sequence constraints</strong>)
  <blockquote>
  <p>what this formula means is that an action happens at least <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-57-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B5;</mo></mrow></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-427" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-428"><span class="texatom" id="MathJax-Span-429"><span class="mrow" id="MathJax-Span-430"><span class="mo" id="MathJax-Span-431" style="font-family: MathJax_Math-italic;">ε</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-57">ε</script> time after the previous one</p>
  </blockquote>
  </li>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-58-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mi>u</mi><msub><mi>r</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-432" style="width: 3.515em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.92em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1002.92em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-433"><span class="mi" id="MathJax-Span-434" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-435" style="font-family: MathJax_Math-italic;">u</span><span class="msubsup" id="MathJax-Span-436"><span style="display: inline-block; position: relative; width: 1.789em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-437" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="texatom" id="MathJax-Span-438"><span class="mrow" id="MathJax-Span-439"><span class="mi" id="MathJax-Span-440" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-441" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-442" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mi>u</mi><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-58">dur_{min}</script>(A) ≤ t(A <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-59-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x22A3;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-443" style="width: 0.717em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1000.54em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-444"><span class="mo" id="MathJax-Span-445" style="font-family: MathJax_Main;">⊣</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>⊣</mo></math></span></span><script type="math/tex" id="MathJax-Element-59">\dashv</script>) – t(A <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-60-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x22A2;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-446" style="width: 0.717em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1000.54em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-447"><span class="mo" id="MathJax-Span-448" style="font-family: MathJax_Main;">⊢</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>⊢</mo></math></span></span><script type="math/tex" id="MathJax-Element-60">\vdash</script>) ≤ <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-61-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mi>u</mi><msub><mi>r</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-449" style="width: 3.574em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.979em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1002.98em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-450"><span class="mi" id="MathJax-Span-451" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-452" style="font-family: MathJax_Math-italic;">u</span><span class="msubsup" id="MathJax-Span-453"><span style="display: inline-block; position: relative; width: 1.908em; height: 0px;"><span style="position: absolute; clip: rect(3.396em, 1000.42em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-454" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="texatom" id="MathJax-Span-455"><span class="mrow" id="MathJax-Span-456"><span class="mi" id="MathJax-Span-457" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-458" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-459" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mi>u</mi><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-61">dur_{max}</script>(A)
  <blockquote>
  <p>this means that the total duration has to be more than a minimum duration and less than a maximum duration.</p>
  </blockquote>
  Respectively, they are called <strong>minimum and maximum separation constraints</strong>.
  It is possible to leave <strong>either</strong> of these bounds out.</li>
  <li>Or, more generally, <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-62-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi><mi>b</mi><mo>&amp;#x2264;</mo><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-460" style="width: 4.408em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.634em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.51em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-461"><span class="mi" id="MathJax-Span-462" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-463" style="font-family: MathJax_Math-italic;">b</span><span class="mo" id="MathJax-Span-464" style="font-family: MathJax_Main; padding-left: 0.301em;">≤</span><span class="mi" id="MathJax-Span-465" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">t</span><span class="mo" id="MathJax-Span-466" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-467" style="font-family: MathJax_Math-italic;">j</span><span class="mo" id="MathJax-Span-468" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi><mi>b</mi><mo>≤</mo><mi>t</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-62">lb ≤ t(j)</script> – <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-63-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2264;</mo><mi>u</mi><mi>b</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-469" style="width: 4.646em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.872em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.87em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-470"><span class="mi" id="MathJax-Span-471" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-472" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-473" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-474" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-475" style="font-family: MathJax_Main; padding-left: 0.301em;">≤</span><span class="mi" id="MathJax-Span-476" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">u</span><span class="mi" id="MathJax-Span-477" style="font-family: MathJax_Math-italic;">b</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>≤</mo><mi>u</mi><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-63">t(i) ≤ ub</script>
  <blockquote>
  <p>l/u b = lower/upper bound</p>
  </blockquote>
  </li>
  </ul>
  <p>The positive thing about this approach is that it is <strong>P TIME</strong></p>
  <p>These constraints must hold true at every state.</p>
  <h4 id="how-to-solve-a-simple-temporal-problem"><a class="anchor" name="how-to-solve-a-simple-temporal-problem" href="#how-to-solve-a-simple-temporal-problem"><span class="octicon octicon-link"></span></a>How to solve a Simple Temporal Problem</h4>
  <p><strong>MAX SEPARATION CONSTRAINT</strong></p>
  <blockquote>
  <p>In this picture, Z is time 0, so the origin. Each arrow is the <strong>Maximum Separation</strong> and t(A) - t(Z) = 4 is to be read as "<em>A comes no more than 4 times units after Z</em>" so between Z and A there can be <strong>at most</strong> 4 time units.
  <img src="img/7_max_separation.png"></p>
  </blockquote>
  <p>Generally you do not happen to have the Max separation from time 0, rather you have it from another action.</p>
  <p>If you want to find the earliest possible time at which an action can occur, you simply need to find the <strong>shortest path</strong> in the graph from point 0 to that action.</p>
  <p><strong>MIN SEPARATION CONSTRAINT</strong></p>
  <img src="img/7_min_separation.png">
  <p>Conversely with the maximum separation, if you want to find the earliest possible time at which an action can occur, you need to find the <strong>longest path</strong> in the graph from point 0 to that action.</p>
  <p>So, the minimum time at which B can happen is not 4, but 5 (2 + 3).</p>
  <p>As looking for the longest path may be counterintuitive, you can multiply all the elements in the inequality by -1, so that
  <code>2 &lt;= t(A) – t(Z)</code> becomes <code>t(Z) - t(A) &lt;= -2</code>
  and you end up looking for the shortest (negative) path</p>
  <div class="warning">Note that the term Z comes now before the term A</div>
  <p>Now that we have both the min and max separation constraints, we can draw this graph</p>
  <blockquote>
  <img src="img/7_minmax.png">
  </blockquote>
  <p>and looking at it, if we find that the shortest (negative) path is longer than the shortest positive path, we have an inconsistency.</p>
  <h3 id="stn"><a class="anchor" name="stn" href="#stn"><span class="octicon octicon-link"></span></a>STN</h3>
  <p>STPs can be converted into graphs called <strong>Simple Temporal Networks</strong> (or STN).</p>
  <p>Say we have 2 actions {A dur = 3, B dur = 5}</p>
  <img src="img/7_AB_STP.png">
  <p>As you can see, the MINIMUM separation is often given by <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-64-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-478" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-479"><span class="mi" id="MathJax-Span-480" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-64">\varepsilon</script> as this is the minimum time interweaving between the beginning(or end) of an action and another.</p>
  <p>Between the same action, instead, that time is given by the duration of the action itself.</p>
  <p>In the example, earliest B start is at <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-65-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B5;</mo></mrow></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-481" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-482"><span class="texatom" id="MathJax-Span-483"><span class="mrow" id="MathJax-Span-484"><span class="mo" id="MathJax-Span-485" style="font-family: MathJax_Math-italic;">ε</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-65">ε</script> as the longest path is -<span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-66-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B5;</mo></mrow></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-486" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-487"><span class="texatom" id="MathJax-Span-488"><span class="mrow" id="MathJax-Span-489"><span class="mo" id="MathJax-Span-490" style="font-family: MathJax_Math-italic;">ε</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-66">ε</script> and can end earliest at (-5) + (-<span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-67-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B5;</mo></mrow></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-491" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-492"><span class="texatom" id="MathJax-Span-493"><span class="mrow" id="MathJax-Span-494"><span class="mo" id="MathJax-Span-495" style="font-family: MathJax_Math-italic;">ε</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-67">ε</script>)</p>
  <img src="img/7_cycles.png">
  <p>A STN could present a <strong>negative cycle</strong>, meaning that the shortest past using lower bounds (the negative numbers) is greater than the shortest path using upper bounds.</p>
  <blockquote>
  <p>in this case: (2 * ε + 5) &gt; 3.</p>
  </blockquote>
  <p>A Negative cycle means that the minimum time is more than the maximum one in the formula <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-68-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi><mi>b</mi><mo>&amp;#x2264;</mo><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-496" style="width: 4.408em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.634em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.51em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-497"><span class="mi" id="MathJax-Span-498" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-499" style="font-family: MathJax_Math-italic;">b</span><span class="mo" id="MathJax-Span-500" style="font-family: MathJax_Main; padding-left: 0.301em;">≤</span><span class="mi" id="MathJax-Span-501" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">t</span><span class="mo" id="MathJax-Span-502" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-503" style="font-family: MathJax_Math-italic;">j</span><span class="mo" id="MathJax-Span-504" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi><mi>b</mi><mo>≤</mo><mi>t</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-68">lb ≤ t(j)</script> – <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-69-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2264;</mo><mi>u</mi><mi>b</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-505" style="width: 4.646em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.872em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1003.87em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-506"><span class="mi" id="MathJax-Span-507" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-508" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-509" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-510" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-511" style="font-family: MathJax_Main; padding-left: 0.301em;">≤</span><span class="mi" id="MathJax-Span-512" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">u</span><span class="mi" id="MathJax-Span-513" style="font-family: MathJax_Math-italic;">b</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>≤</mo><mi>u</mi><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-69">t(i) ≤ ub</script></p>
  <p>As there is the chance to bump into a negative cycle, which would make the problem unsolvable, we have to use a proper algorithm when searching for the shortest path:</p>
  <ul>
  <li>Dijkstra is not good because doesn't tell you about cycles;</li>
  <li>Bellman-Ford (and Washley?) are good because, even if they can't deal with cycles either, they do tell you about them.</li>
  </ul>
  <h2 id="crikey-3"><a class="anchor" name="crikey-3" href="#crikey-3"><span class="octicon octicon-link"></span></a>Crikey 3</h2>
  <p><strong>Crikey 3</strong> is a forward search planner which takes into account snaps start and end to represent its states:
  <img src="img/7_CRIKEY.png"></p>
  <p>In the example, the planner operates the green path:</p>
  <ul>
  <li>starts with A_Start;</li>
  <li>then goes B_Start;</li>
  <li>then goes B_End; and this leads to</li>
  <li>ABBA, which contains a negative cycle and has to be pruned.</li>
  </ul>
  <div class="warning">
      In the exam, if you have the adjacency matrix be careful on the <b>ORDER</b> of the actions (ABBA or ABAB)
  </div>
  <p>So it tries again from AB, ending A first and then B.</p>
  <p>At every state the planner checks that all the constraints are not violated.</p>
  <h3 id="memoization"><a class="anchor" name="memoization" href="#memoization"><span class="octicon octicon-link"></span></a>Memoization</h3>
  <p><strong>Memoization</strong> is a process that allows you to prune states with facts equal to one already visited (when applying costs, you can prune these states if the cost is the same or worse as equal one already visited).</p>
  <p>In temporal planning, this is not possible as two state (ABBA &amp; ABAB) may in fact have the same facts, but as the order here matters, you could end up pruning a valid state (<strong>permutations</strong> matter here).</p>
  <h2 id="stp-heuristic"><a class="anchor" name="stp-heuristic" href="#stp-heuristic"><span class="octicon octicon-link"></span></a>STP Heuristic</h2>
  <p><strong>(video 4)</strong>
  There are 3 main options:</p>
  <ol>
  <li>using the <strong>RPG</strong></li>
  </ol>
  <blockquote>
  <p>It gives us an estimate of how many actions we shall take to achieve the goals, but does not tell us about the time; also, it may favor few longer actions to more smaller ones</p>
  </blockquote>
  <ol start="2">
  <li>Use a <strong>temporal reachability analysis</strong> (TRPG)</li>
  </ol>
  <blockquote>
  <p>This is basically an RPG with timestamped layers (used by CRIKEY)</p>
  </blockquote>
  <ol start="3">
  <li>Approximate time as <strong>action costs</strong></li>
  </ol>
  <blockquote>
  <p>If you already have a <em><strong>numeric relaxed plan</strong></em> (the one used in plans with cost actions), you can use that to find the heuristic.</p>
  </blockquote>
    <div class="warning">
      When you operate the same action twice in <b>parallel</b>, if you are operating with costs, then there is an <b>additive</b> property by which you just sum the cost of the fuel twice, but under a temporal perspective <b>the time doesn't double when you operate in parallel</b>. For this reason, this latter heuristic is <b>inadmissible</b>. 
    </div>
  <p>Let's focus on the 2<sup>nd</sup> solution for now.</p>
  <p>The first fact layer is at time 0.0, the rule for the action layers is that their timestamp is the same as the immediate preceding fact layer, so the first action layer is at time 0.0 too.</p>
  <p>Now, due to the fact that, after an action, some time must elapse and we call that time <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-70-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-514" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-515"><span class="mi" id="MathJax-Span-516" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-70">\varepsilon</script> (= 0.01), the next fact layer will have a time stamp of 1.01.</p>
  <p>As this heuristic reasons with snaps, you can have an snap_start at any time <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-71-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi></mrow></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-517" style="width: 2.384em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.967em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1001.97em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-518"><span class="msubsup" id="MathJax-Span-519"><span style="display: inline-block; position: relative; width: 1.967em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.36em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-520" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.36em;"><span class="texatom" id="MathJax-Span-521"><span class="mrow" id="MathJax-Span-522"><span class="mi" id="MathJax-Span-523" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-524" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-525" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-526" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-527" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.075em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-71">t_{start}</script> (as long as the preconditions hold) but the time snap_end cannot happen before <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-72-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi></mrow></msub><mo>+</mo><mi>d</mi><mi>u</mi><mi>r</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-528" style="width: 5.717em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.765em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1004.76em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-529"><span class="msubsup" id="MathJax-Span-530"><span style="display: inline-block; position: relative; width: 1.967em; height: 0px;"><span style="position: absolute; clip: rect(3.158em, 1000.36em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-531" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.36em;"><span class="texatom" id="MathJax-Span-532"><span class="mrow" id="MathJax-Span-533"><span class="mi" id="MathJax-Span-534" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-535" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-536" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-537" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-538" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-539" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="mi" id="MathJax-Span-540" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-541" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-542" style="font-family: MathJax_Math-italic;">r</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.146em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi></mrow></msub><mo>+</mo><mi>d</mi><mi>u</mi><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-72">t_{start} + dur</script>. Of course, if that snap_end has some preconditions, we must delay it until those preconditions are satisfied.</p>
  <p>Finally, we have to ensure that, when we start an action, not only snap_start preconditions exist, but also snap_invariant preconditions exist. However, we do not have to worry about the possibility of snap_variants to be deleted as in the RPG deletion effect are not taken into account.</p>
  <h3 id="solution-extraction"><a class="anchor" name="solution-extraction" href="#solution-extraction"><span class="octicon octicon-link"></span></a>Solution Extraction</h3>
  <p>This works the same way as the normal RPG in the sense that you start from the goal layer, select the actions that achieve it, then look at the preconditions, select the actions that achieve them and so on.</p>
  <p>Keep in mind 2 thing though:</p>
  <ul>
  <li>Given an action A, if we achieve A_start we must achieve A_end and vice versa.</li>
  <li>We need to satisfy A_invariant preconditions (again do not worry about maintaining them).</li>
  </ul>
  <p>The advantage of using TRPG (which is the method we have just illustrated) is that the estimate we get is based on the time (due to the time stamps) rather than the actions; so the heuristic guides us to plans that are shorter in time rather than short in actions.</p>
  <p><strong>Is the relaxed plan length admissible?</strong></p>
  <blockquote>
  <p>Like for the normal RPG, there is no guarantee that the number of actions is an underestimate.</p>
  </blockquote>
  <p><strong>Can we get an admissible estimate of the time we can achieve a fact in the TRPG?</strong></p>
  <blockquote>
  <p>Yes, the layer at which a fact appears is an admissible estimate of how soon we achieve that fact.</p>
  </blockquote>
  <p><strong>Is the relaxed plan makespan (the interval from the start to the end) admissible?</strong></p>
  <blockquote>
  <p>Yes, it is. We can use this heuristic to prune states.</p>
  </blockquote>
  <div class="warning"> 
    The actual solution to the plan terminates with the achievement of the <b>end snap</b> of the last action and you do not have to add <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-73-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-543" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-544"><span class="mi" id="MathJax-Span-545" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-73">\varepsilon</script> to.
    Say your final action is at t = 3.003, the next fact layer is t = 3.004, and if you are asked about the final solution, the goal is <b>USABLE</b> at 3.004, but <b>ACHIEVED</b> at 3.003 
  </div>
  <h1 id="week-8---temporal-planning-ii"><a class="anchor" name="week-8---temporal-planning-ii" href="#week-8---temporal-planning-ii"><span class="octicon octicon-link"></span></a>Week 8 - Temporal Planning (II)</h1>
  <p><strong>(video 1)</strong></p>
  <h2 id="popf"><a class="anchor" name="popf" href="#popf"><span class="octicon octicon-link"></span></a>POPF</h2>
  <p>POPF (Partial Order Planning Forwards) is an CRIKEY3 based temporal planner, but differently from CRIKEY3, POPF only adds constraints when necessary.
  It uses snaps (start and end action) to fragment temporal actions.
  A state S is a tuple <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-74-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;lt;</mo><mi>F</mi><mo>,</mo><mi>V</mi><mo>,</mo><mi>P</mi><mo>,</mo><mi>T</mi><mo>&amp;gt;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-546" style="width: 7.86em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.551em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1006.49em, 2.562em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-547"><span class="mo" id="MathJax-Span-548" style="font-family: MathJax_Main;">&lt;</span><span class="mi" id="MathJax-Span-549" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-550" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-551" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.182em;"></span></span><span class="mo" id="MathJax-Span-552" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-553" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-554" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-555" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-556" style="font-family: MathJax_Main; padding-left: 0.301em;">&gt;</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&lt;</mo><mi>F</mi><mo>,</mo><mi>V</mi><mo>,</mo><mi>P</mi><mo>,</mo><mi>T</mi><mo>&gt;</mo></math></span></span><script type="math/tex" id="MathJax-Element-74"><F,V,P,T></script> of:</p>
  <ul>
  <li><strong>F</strong> Propositional Facts</li>
  <li><span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-75-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-557" style="width: 0.955em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.78em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-558"><span class="mi" id="MathJax-Span-559" style="font-family: MathJax_Math-italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.182em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-75">V</script> Values of numeric task variables</li>
  <li>The Plan to reach S</li>
  <li>The Temporal Constraints on the steps in P</li>
  </ul>
  <p>To see how it works let's imagine this scenario:
  2 actions A and B with no interactions to one another, that is, neither sets the prerequisites for the other.
  B takes longer than A but B┤ must precede A┤(this is a <strong>total order constraint</strong>).
  <img src="img/8_POPF.png"></p>
  <p>Generally, total order constraints are good as may require some preconditions for B_start achieved by A_start. As in our example A_end relies on a precondition achieved by B_end, A_start cannot be achieved before B_end.
  B is however longer than A, so the plan is temporally unacceptable.
  Hence, we have to remove the constraint A_start before A_end.</p>
  <p>To decide the necessary constraints we record additional information at each state concerning which steps <strong>achieve</strong> / <strong>delete</strong> / <strong>depend on each fact</strong>.</p>
  <p>If we are going to introduce an action the deletes a previously achieve fact, in traditional partial order planning we either <strong>demote</strong> or <strong>promote</strong> an action; here, as we are operating a forward search planning, we always do a promotion.</p>
  <p>Let's see how this works:</p>
  <img src=".img/../img/8_POPF_promotion1.png">
  In our example we added the constraint that B_start must come after A_start, bu in reality:
  - neither B_start requires some preconditions achieved by A_start;
  - nor B_start deletes some preconditions necessary to achieve A_start.
  <p>Hence, we remove that dependency:
  <img src=".img/../img/8_POPF_promotion2.png">
  The dependency to respect now is the one B_end before A_end, and this does not break any constraints.
  Next, keeping A_end after B_end, we see that A is shorter than B, so we end up having B_start before A_start:</p>
  <img src=".img/../img/8_POPF_promotion3.png">
  <p>And you can see that B starts at <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-76-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-560" style="width: 0.479em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.36em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.3em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-561"><span class="mi" id="MathJax-Span-562" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-76">t</script> = 0.00, whereas A starts at <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-77-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-563" style="width: 0.479em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.36em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.3em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-564"><span class="mi" id="MathJax-Span-565" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.932em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-77">t</script> = 3.01, that is:
  <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-78-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mi>u</mi><mi>r</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-566" style="width: 1.908em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.551em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1001.55em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-567"><span class="mi" id="MathJax-Span-568" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-569" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-570" style="font-family: MathJax_Math-italic;">r</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mi>u</mi><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-78">dur</script>(B) + <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-79-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-571" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-572"><span class="mi" id="MathJax-Span-573" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-79">\varepsilon</script> - <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-80-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mi>u</mi><mi>r</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-574" style="width: 1.908em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.551em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1001.55em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-575"><span class="mi" id="MathJax-Span-576" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-577" style="font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-578" style="font-family: MathJax_Math-italic;">r</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mi>u</mi><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-80">dur</script>(A)</p>
  <h3 id="popf-details"><a class="anchor" name="popf-details" href="#popf-details"><span class="octicon octicon-link"></span></a>POPF details</h3>
  <p><strong>(video 2)</strong></p>
  <blockquote>
  <p>For this section it can be useful to consider that <strong>i</strong> is the <strong>state we are currently in</strong>, so t(i) denotes its timestamp, and <strong>j</strong> indicates a <strong>future state</strong>; finally, <strong>p</strong> is a <strong>fact</strong>.</p>
  </blockquote>
  <p>To capture ordering information POPF considers:</p>
  <ul>
  <li>The actions adding or deleting facts: <strong>F+</strong> and <strong>F-</strong>, where <strong>F+(p)</strong> <em>(F-(p))</em> is the index of the of the step that most recently <strong>added</strong> <em>(deleted)</em> p</li>
  <li>The currently active facts: <strong>FP</strong>, where <strong>FP(p)</strong> is a set of pairs <strong>&lt;j,d&gt;</strong>:
  <ul>
  <li><strong>&lt;j,ε&gt;</strong> denotes that step j has an <strong>instantaneous condition</strong> on p (at <strong>start</strong> or at <strong>end</strong>)</li>
  <li><strong>&lt;j,0&gt;</strong> denotes that step j marks the <strong>end</strong> of an action with an <strong>over all condition</strong> on p.</li>
  </ul>
  </li>
  </ul>
  <blockquote>
  <p>The first one has ε because it happens after ε time from the action that achieves the precondition p, whereas &lt;j, 0&gt; denotes the end of an invariant, and as actions can achieve and deletes their own invariants, they do not require any further time to elapse.</p>
  </blockquote>
  <div class="warning"> j itself is not the time stamp, rather, the index of the action.</div>
  <blockquote>
  <p>To better understand this concept imagine the barrier domain wherein there are 2 barriers and they have to be open, respectively, when the walk starts, and when it ends:
  <img src="img/8_POPF_FP.png"></p>
  </blockquote>
  <p>For each <code>at start</code> condition p we enter an ordering constraint:</p>
  <blockquote>
  <p>t(F+(p)) + ε ≤ t(i)</p>
  </blockquote>
  <p>The constraint says: “<em>this action comes after the most recent action that added P to the state, which is F+(p)</em>”
  If this fact (p) is true at the current state, then the last thing that happened to this fact was an add effect and not a delete one, and this fact must be true because we are considering an action with the precondition p applicable. As we know the fact must be true, we just have to make sure we come after what made it true.</p>
  <p>For each <code>overall</code> condition p we enter this constraint:</p>
  <blockquote>
  <p><strong>if</strong> F+(p) <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-81-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2260;</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-579" style="width: 0.955em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.313em, 1000.72em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-580"><span class="mo" id="MathJax-Span-581" style="font-family: MathJax_Main;">≠</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.289em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≠</mo></math></span></span><script type="math/tex" id="MathJax-Element-81">\ne</script> i <strong>then</strong> t(F+(p)) + ε ≤ t(i)</p>
  </blockquote>
  <p>The if it's important because, if this action itself adds p then we don't need to worry about ordering ourself after the previous thing to add p bc we are that previous thing, hence, we don't add the constraint.</p>
  <h3 id="popf-in-action"><a class="anchor" name="popf-in-action" href="#popf-in-action"><span class="octicon octicon-link"></span></a>POPF in action</h3>
  <img src="img/8_POPF_inAction1.png">
  <blockquote>
  <p>On the right hand side you can the domain map;
  On the top left you can see the actions performed in order
  On the bottom left you can see the temporal plan</p>
  </blockquote>
  <p>The first action operated is the <strong>start working</strong> and the second is <strong>Load</strong>. What is different here is that W_start and L_start are not sequential in the graph (aka, L_start doesn't happen ε after W_start) and the reason is that L_start does not needs preconditions achieved by W_start, nor it deletes any preconditions required from W_start (and the same is true for W_start about L_start).</p>
  <img src="img/8_POPF_inAction2.png">
  <p>Advancing with the planning you can see that both B_start and D_start depend on the preconditions achieved by W_start, hence we add a constraint in the form of an arrow.</p>
  <p>From the graph it is easy to see how [L_start, L_end] and [W_start, B_start, B_end, D_start] can happen in parallel.</p>
  <p>This is a problem as D_start (Driving) should happen after Loading the parcel into the truck. So, we must add a constraint of the form D_start after L_end.</p>
  <p>Beware not to add the the constraint from D_start to L_start, because this would break the Load invariant of having the truck at the same location throughout.</p>
  <h3 id="what-happens-when-you-delete-effects"><a class="anchor" name="what-happens-when-you-delete-effects" href="#what-happens-when-you-delete-effects"><span class="octicon octicon-link"></span></a>What happens when you delete effects</h3>
  <img src="img/8_POPF_formula.png">
  <p>The first part says that if we are calling an <code>at start</code> action that deletes p, all the actions that require p as a precondition must happen before or at the same time as the action we are operating now that deletes p.</p>
  <p>The second bit says that, if we action we are in, that is t(i), in which we are deleting p, come after the last action to add p <strong>F+(p)</strong>, then p is false; conversely, if our action comes before the last action that added p, then p is True.</p>
  <p>Now, as we have deleted p, we set <strong>F-(p) = i</strong>, meaning that the last action to operate on P happened at time i (current time) and p was deleted. Also, we have to <strong>clear</strong> <strong>FP(p)</strong> as that is a "history" of the actions that required p to be True, but as the current state i comes after all of them (this was checked in the previous steps) we don;t have to worry about those actions anymore.</p>
  <h3 id="what-happens-when-you-add-effects"><a class="anchor" name="what-happens-when-you-add-effects" href="#what-happens-when-you-add-effects"><span class="octicon octicon-link"></span></a>What happens when you add effects</h3>
  <img src="img/8_POPF_formula_add.png">
  <p>Similar to the delete effect, but we add the if condition here.</p>
  <p>The main benefit of POPF is not the search time, which is the same as CRIKEY3, but <strong>the makespan of the plan does improve</strong>.
  Also, in domain with deadlines (that is, where we have to achieve an action by a certain time), POPF is more capable of finding a solution and does it more quickly. This is thanks to the removal of the ordering constraints.</p>
  <h2 id="safety-compression"><a class="anchor" name="safety-compression" href="#safety-compression"><span class="octicon octicon-link"></span></a>Safety Compression</h2>
  <p><strong>(video 3)</strong></p>
  <p>When we decompose durative actions in snap_start and snap_end we have an at least <strong>twice</strong> as big search space.</p>
  <p>There are actions, like the <em>open-barrier</em> wherein we do not care about the final effect, rather the invariant, and other where the matters is the effect, like <em>load-truck</em>.</p>
  <p>The issue with load-truck is that, after we start the action, we have to consider the end of it in every state we search until we apply it. This is a waste of time searching.</p>
  <p>So the intuition is that if the action does nothing bad, we can just <strong>end it straight away</strong>, just like <em>load</em> or <em>drive</em>. This thing is also called <strong>compression</strong>.</p>
  <p>For actions like the barrier one, instead, we cannot do the same reasoning.</p>
  <p>When can we apply compression? Given an action C we consider 2 rules:</p>
  <ul>
  <li>
  <p><strong>The end-effect rule</strong></p>
  <ul>
  <li>There must be no end-delete effects.</li>
  <li>Delete effects make preconditions false, which is bad:</li>
  </ul>
  <p>if we immediately add C⊣ after Cⱶ in this case, then we might not be able to use a fact that C added, e.g. the match or the barrier.</p>
  </li>
  <li>
  <p><strong>The end-precondition rule</strong></p>
  <ul>
  <li>If an action has end-preconditions that aren't also over all conditions, we can't just end it – maybe we have to do something first.</li>
  <li>Cⱶ requires p, adds q.  D requires q, adds r. C⊣ requires r.</li>
  </ul>
  </li>
  </ul>
  <p>pre (C⊣) might not be satisfied.
  <img src="img/8_end_pre_rule.png"></p>
  <p><strong>Compression safe end preconditions</strong>
  In general we can compress if:</p>
  <ul>
  <li>once the start of an action (Cⱶ) has been applied, <strong>invariants of C will be maintained until C⊣ is applied</strong> (no action may be applied that violates them).</li>
  <li>Pre (C⊣) ⊆ Pre(C↔) (<strong>the invariant and the end actions share the same preconditions</strong>), C⊣ is always applicable so we don’t need to worry about something deleting pre (C⊣).</li>
  </ul>
  <p>so, an action is compression safe if:</p>
  <ul>
  <li>it has no end delete effects;</li>
  <li><strong>and</strong> no end preconditions that are not over all conditions.</li>
  </ul>
  <p>The main issue with this approach is that, in CRIKEY3, it prevents parallelism:</p>
  <img src="img/8_POPF_Parallelism.png">
  <p>However, POPF uses partial ordering and the efficiency is not compromised and automatic compression improves performances.</p>
  <h2 id="deadlines"><a class="anchor" name="deadlines" href="#deadlines"><span class="octicon octicon-link"></span></a>Deadlines</h2>
  <p><strong>(video 4)</strong></p>
  <p>Deadlines can be of 2 type:</p>
  <ul>
  <li>The ones we normally identify as such, that is, an action has to be achieved by a certain time;</li>
  <li>The windows, that is, an action has to be achieved after a certain time, but before another one (dinner is served from 5 to 7)</li>
  </ul>
  <img src="img/8_deadlines.png">
  <p>The way you model deadlines is simply by using a "timer" of the form</p>
  <blockquote>
  <p>(<strong>at</strong> &lt;time&gt; <strong>(fact)</strong>)
  This predicate is actually called TIL (timed-initial literal)</p>
  </blockquote>
  <p>This can be a either an add or delete effect.
  As actions have a duration, it common sense to add the deadline as an <code>at end</code> constraint. (<code>at start</code> could be used instead, but you should tweak the time of the deadline)</p>
  <p>For time windows, the approach is pretty much the same, you use the <strong>at</strong> function to open and then close a time window.</p>
  <p>Keep in mind that you can use <code>at end</code>, <code>at start</code> but also <code>overall</code> constraints (e.g. you have to go for shopping, the grocery is open from 8 AM to 8 PM, and overall the time you are walking around the aisles the grocery has to be open.)</p>
  <h2 id="reasoning-with-tils-in-forward-search"><a class="anchor" name="reasoning-with-tils-in-forward-search" href="#reasoning-with-tils-in-forward-search"><span class="octicon octicon-link"></span></a>Reasoning with TILs in Forward Search</h2>
  <ul>
  <li>Order the TILs chronologically;</li>
  <li>At each state we have a choice:
  <ul>
  <li>Apply an action that is applicable in that state;</li>
  <li>Apply the next Available TIL.</li>
  </ul>
  </li>
  </ul>
  <p>This allows us to leave the choice to search about whether the TIL will appear before or after a given action.</p>
  <p>POPF has some advantages in this situation: only necessary orderings are enforced.</p>
  <p>Imagine a problem with a bus driver working (W) and during the shift he has to drive the bus thru Route1 (R1) and Route2 (R2). There is a deadline Time Window (TW = (at 3.75 (due Route3)) (at 4 (not (due Route3))) ):</p>
  <img src="img/8_Time_Windows.png">
  <blockquote>
  <p>This is The CRIKEY3 solution, in POPF the edge TW1 <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-82-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathcolor=&quot;red&quot;>\rarr</mtext></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-582" style="width: 2.622em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.146em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1002.15em, 2.622em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-583"><span class="mtext" id="MathJax-Span-584" style="font-family: MathJax_Main; color: red;">\rarr</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathcolor="red">\rarr</mtext></math></span></span><script type="math/tex" id="MathJax-Element-82">\rarr</script> R3_start would not be enforced.</p>
  </blockquote>
  <p>The plan, in order to ba valid, has to be valid on its own and has to keep being valid after applying the TILs.</p>
  <p>Beware, you can have negative cycles that include deadline/temporal window edges.</p>
  <p>Both POPF and CRIKEY can find the solution (if it exists) when you have these negative cycles, but the difference is that CRIKEY3 has to search again whereas POPF can easily solve the problem thanks to partial ordering.</p>
  <h1 id="week-9---colin-continuous-linear-change"><a class="anchor" name="week-9---colin-continuous-linear-change" href="#week-9---colin-continuous-linear-change"><span class="octicon octicon-link"></span></a>Week 9 - CoLin (Continuous Linear Change)</h1>
  <blockquote>
  <p><strong>USEFUL for this lecture</strong>: numeric values can be of 2 types:</p>
  <ul>
  <li><strong>discrete</strong>: is it when you use a number (like 5) or the values previously assigned to a variable (&gt; (?duration) ?time_to_eat)</li>
  <li><strong>continuous</strong>: values that depend on the duration of an action but apply the derivative of a formula. They are defined by <strong>#t</strong> which means the derivative with respect to the time.</li>
  </ul>
  </blockquote>
  <p>So far we have seen temporal domains and action costs, sometimes blended together, for instance, driving a bus takes 2 time units and has a cost of 10 for the fuel.</p>
  <p>Now, imagine a hybrid bus (when the battery is running short it can use an engine to recharge it);
  This bus has to go from A to B. It takes 2 time units and the battery decreases by 40 at every time unit.
  When the engine is used (duration &gt;= 0.25) the battery is recharged by 60 per time unit.</p>
  <p>In the planning we have seen so far, if the bus starts with 50 of battery it cannot reach B as the changes are instantaneous.</p>
  <img src="img/9_Colin_formula.png">
  <p>In reality, a similar situation may happen and the bus can actually reach B by using the engine.</p>
  <p><strong>COLIN</strong> is a planner which allows for this by considering the time units when dealing with temporal problems.</p>
  <img src="img/9_Colin.png">
  <blockquote>
  <p><strong>Red</strong> things are preconditions and <strong>blue</strong> ones are the effects. The ones in the middle are the invariants.</p>
  </blockquote>
  <p>How does colin executes?</p>
  <p>This first example takes into account battery:</p>
  <blockquote>
  <img src="img/9_Colin_execution.png">
  </blockquote>
  <p>B<sub>x</sub> means Battery level at snap x.
  The highlighted lines are the constraints.</p>
  <blockquote>
  <p>Note 2 things:</p>
  </blockquote>
  <ol>
  <li>there are 2 Bs: B and B<span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-83-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi></mi><mo>&amp;#x2032;</mo></msup></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-585" style="width: 0.36em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.301em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1000.3em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-586"><span class="msup" id="MathJax-Span-587"><span style="display: inline-block; position: relative; width: 0.301em; height: 0px;"><span style="position: absolute; clip: rect(3.812em, 1000em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-588"></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0em;"><span class="mo" id="MathJax-Span-589" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.075em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi></mi><mo>′</mo></msup></math></span></span><script type="math/tex" id="MathJax-Element-83">'</script> where B denotes the normal battery and B<span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-84-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi></mi><mo>&amp;#x2032;</mo></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-590" style="width: 0.36em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.301em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1000.3em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-591"><span class="msup" id="MathJax-Span-592"><span style="display: inline-block; position: relative; width: 0.301em; height: 0px;"><span style="position: absolute; clip: rect(3.812em, 1000em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-593"></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0em;"><span class="mo" id="MathJax-Span-594" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.075em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi></mi><mo>′</mo></msup></math></span></span><script type="math/tex" id="MathJax-Element-84">'</script> denotes the derived of the battery during the execution of an action. In other words, B is the value of right before the start of an action and B<span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-85-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi></mi><mo>&amp;#x2032;</mo></msup></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-595" style="width: 0.36em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.301em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1000.3em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-596"><span class="msup" id="MathJax-Span-597"><span style="display: inline-block; position: relative; width: 0.301em; height: 0px;"><span style="position: absolute; clip: rect(3.812em, 1000em, 4.17em, -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-598"></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0em;"><span class="mo" id="MathJax-Span-599" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.075em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi></mi><mo>′</mo></msup></math></span></span><script type="math/tex" id="MathJax-Element-85">'</script> is the value right after the start.</li>
  <li>the constraint B &gt;= 10 is as a precondition of the invariant, not of the start action, this is because the invariant could be achieved by the start action itself and, when that's the case, you would be saying that "I dont care if the start action achieves it, i do not allow it", which is wrong.</li>
  </ol>
  <p>Point 1 of the above list can be genaralised as follows:</p>
  <blockquote>
  <p>For each (snap) action (start, instantaneous or end), <strong>Ai</strong>, in the (partial) plan create the following LP (linear program, meaning that δv increases or diminishes by a constant factor c) variables for each numeric variable in the problem:</p>
  <ul>
  <li><strong>v<sub>i</sub></strong>: the value of that variable <strong>immediately before</strong> Ai is executed;</li>
  <li><strong>v’<sub>i</sub></strong>: the value v <strong>immediately after</strong> Ai is executed.</li>
  <li><strong>δv<sub>i</sub></strong>: the <strong>rate of change</strong> active on v after Ai is executed.</li>
  </ul>
  <p>Create a single LP variable t<sub>i</sub> to represent the time at which Ai will be executed</p>
  </blockquote>
  <div class="warning">
    You should look at <b>δv</b> as a function which takes a timewindow as input (t<sub>j</sub> - t<sub>i</sub>) and then derives it.
    So, if <b>δv</b> is simply <b>4t</b>, the derivative is 4 so you just multiply the time by 4, but if <b>δv</b> were <b>2w - u</b>, and so <b>non-linear</b> the problem would be unsolvable. So we assume that <b>ALL the δv MUST be linear</b>.  
  </div>
  <p>A focal point of COLIN is LP, which is used for:</p>
  <ul>
  <li>Determining the constraints;</li>
  <li>Create an objective function and so minimise (or maximise) some values;</li>
  <li>Determining action applicability.</li>
  </ul>
  <p>Like CRIKEY3 (and unlike POPF and OPTIC), COLIN by default puts an epsilon separation between every adjacent pair of snap actions regardless of whether the previous one achieves a precondition or invariant of the next. (Except, of course if these two actions are the start and end of the same action in which case this is superfluous as it is dominated by the lower bounding duration constraint)</p>
  <h2 id="constraints-video-2"><a class="anchor" name="constraints-video-2" href="#constraints-video-2"><span class="octicon octicon-link"></span></a>Constraints (video 2)</h2>
  <img src="img/9_Colin_constraints.png">
  <img src="img/9_Colin_constraints2.png">
  <h2 id="linearity-assumption"><a class="anchor" name="linearity-assumption" href="#linearity-assumption"><span class="octicon octicon-link"></span></a>Linearity Assumption</h2>
  <img src="img/9_Linearity_assumption.png">
  <p>We mentioned that we check the constraints right after the start and before the end of action, but how do we know that a constraint holds throughout an invariant? Being the formula linear (monotonic), if the constraint is satisfied both at the start and at the end, it is also satisfied throughout.
  Vice versa, if it not satisfied at either extreme, it is also not satisfied at some point during the invariant; Note: if the function is not monotonic, we cannot guarantee that this assumption holds as it is not feasible to check the value at every time, so we do not allow non-monotonic functions.</p>
  <h2 id="objective-function"><a class="anchor" name="objective-function" href="#objective-function"><span class="octicon octicon-link"></span></a>Objective Function</h2>
  <div class="definition">
    <b>What is the Objective Function?</b>
  <p>The objective of a linear programming problem will be to maximize or to minimize some numerical value.</p>
  </div>
  <p>The point of a Linear Program is to minimise (or maximise) a value via an objective function. In our case we want to minimise the time and we do it by creating a variable <b>t<sub>now</sub></b> and adding the constraint that t<sub>now</sub> has to come after every single t<sub>i</sub>:</p>
  <blockquote>
  <p>t<sub>i</sub> - t<sub>now</sub> &gt;= <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-86-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-600" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-601"><span class="mi" id="MathJax-Span-602" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-86">\varepsilon</script> for every t<sub>i</sub></p>
  </blockquote>
  <p>If time is not the only thing we care about, we can create the variable <b>v<sub>now</sub></b> which represents the value of v at t<sub>now</sub>
  and seek to minimise that instead.</p>
  <img src="img/9_objective_function.png">
  <h2 id="action-applicability"><a class="anchor" name="action-applicability" href="#action-applicability"><span class="octicon octicon-link"></span></a>Action applicability</h2>
  <img src="img/9_action_applicability.png">
  <div class="question">
    What is an active change?
  </div>
  <h2 id="using-the-lp-to-find-bounds"><a class="anchor" name="using-the-lp-to-find-bounds" href="#using-the-lp-to-find-bounds"><span class="octicon octicon-link"></span></a>Using the LP to find Bounds</h2>
  <img src="img/9_Bound_with_LP.png">
  <hr>
  <p><strong>Isn't solving many LPs expensive?</strong>
  Short answer no: they’re easy ones.
  Heuristic computation is notoriously expensive:</p>
  <blockquote>
  <p>An analysis showed that FF spends ~80% of its time evaluating the heuristic.</p>
  </blockquote>
  <p>So what about COLIN:</p>
  <blockquote>
  <p>Empirically using an STP (like CRIKEY3) scheduler scheduling accounts for on average less than 5% of state evaluation time.</p>
  </blockquote>
  <p>For CLP and CPLEX (LP solvers) the figures are 13% and 18% respectively.</p>
  <p>So solving LPs is better than calculating the heuristic.</p>
  <h2 id="optic-video-3"><a class="anchor" name="optic-video-3" href="#optic-video-3"><span class="octicon octicon-link"></span></a>OPTIC (video 3)</h2>
  <img src="img/9_planners_relationships.png">
  <p>OPTIC is an extension of POPF, so it allows continuous numeric changes as well as preferences.</p>
  <img src="img/9_OPTIC_example.png">
  In this example we have a train and a bus which both reach a train station and then leave to another location.
  <p>TA/D = Train Arrives/Departs; idem for the bus;</p>
  <p>If you only consider solid lines, this is a temporal problems.
  However, we introduce 2 preferences <strong>P1</strong> and <strong>P2</strong></p>
  <h2 id="mixed-integer-program-mip-and-big-m"><a class="anchor" name="mixed-integer-program-mip-and-big-m" href="#mixed-integer-program-mip-and-big-m"><span class="octicon octicon-link"></span></a>Mixed Integer Program (MIP) and Big M</h2>
  <img src="img/9_MIP_1.png">
  <img src="img/9_MIP_2.png">
  <h6 id="video-4-is-useless"><a class="anchor" name="video-4-is-useless" href="#video-4-is-useless"><span class="octicon octicon-link"></span></a>(video 4 is useless)</h6>
  <h2 id="pddl-video-5"><a class="anchor" name="pddl-video-5" href="#pddl-video-5"><span class="octicon octicon-link"></span></a>PDDL+ (video 5)</h2>
  <p>So far we have seen domains with only either durative or instantaneous actions.</p>
  <p>In <strong>PDDL+</strong> this concept is no longer true, in fact we have <strong>mixed actions</strong> (durative and non)
  <img src="img/9_hybrid.png"></p>
  <p><strong>REMEMBER:</strong> (:action x) means that an action is immediate whereas (:durative-action y) means the effects may not be immediate.</p>
  <p>Previously, we were responsible for all the actions, now actions (called <strong>events</strong> or <strong>processes</strong> if durative) <strong>happen independently</strong> and triggers as soon as the conditions are met.
  <img src="img/9_processes_events.png"></p>
  <blockquote>
  <p>e.g. imagine the action of dropping a ball, it bounces on the floor and then catching it back.
  <img src="img/9_process_example.png"><br>
  <img src="img/9_event_example.png"></p>
  </blockquote>
  <p>Finally we allow for <strong>non-linear</strong> continuous actions
  <img src="img/9_Continuous_non_linear_effects.png"></p>
  <h2 id="possible-issues-with-pddl"><a class="anchor" name="possible-issues-with-pddl" href="#possible-issues-with-pddl"><span class="octicon octicon-link"></span></a>Possible Issues with PDDL+</h2>
  <h3 id="1-zeno-behaviour"><a class="anchor" name="1-zeno-behaviour" href="#1-zeno-behaviour"><span class="octicon octicon-link"></span></a>1. Zeno Behaviour</h3>
  <p>Suppose there were no catch action, the ball from the previous example would bounce forever always at the same rate, which is not a correct behaviour as the ball should lose energy.</p>
  <p>We can remodel the problem adding this energy loss called coefficient of restitution:</p>
  <img src="img/9_coeff_restitution.png">
  <p>If we do not tell the planner to stop the bouncing when the energy is below a certain amount, we would expect to reach a point at which we have infinite bounces at the same instant.</p>
  <p>Actually, this is not possible as, when the same action will be triggered twice on the same object at the same instant, the planner will <strong>throw an error</strong>, but  it's still nice to have something preventing the ball from keeping bouncing after a certain threshold.</p>
  <hr>
  <h3 id="2-cascading-events"><a class="anchor" name="2-cascading-events" href="#2-cascading-events"><span class="octicon octicon-link"></span></a>2. Cascading Events</h3>
  <p>Another risk is to have events triggering other event in a loop, or as it called here, <strong>in cascade</strong>. If an event goes on forever it takes forever to check it.</p>
  <p>The solution should be that each event deletes its own preconditions.</p>
  <hr>
  <h3 id="3-semantics-issue"><a class="anchor" name="3-semantics-issue" href="#3-semantics-issue"><span class="octicon octicon-link"></span></a>3. Semantics Issue</h3>
  <p>Consider the following scenario:</p>
  <blockquote>
  <p>(:event E</p>
  </blockquote>
  <p>&nbsp;:precondition (&gt; (x) 10)
  &nbsp;:effect (and (not (active)) (explode)))</p>
  <blockquote>
  <p>(:process P</p>
  </blockquote>
  <p>&nbsp;:precondition (active)
  &nbsp;:effect (increase (x) (* #t 1)))</p>
  <blockquote>
  <p>:init (= (x) 0) (active)</p>
  </blockquote>
  <p>At any time <strong>after</strong> x &gt; 10 the event E can occur. It can be 10 + <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-87-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-603" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-604"><span class="mi" id="MathJax-Span-605" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-87">\varepsilon</script>, for as long as <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-88-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-606" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-607"><span class="mi" id="MathJax-Span-608" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-88">\varepsilon</script> &gt; 0, but this means it can also be possible with <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-89-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-609" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-610"><span class="mi" id="MathJax-Span-611" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-89">\varepsilon</script>/2, or <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-90-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-612" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.551em, 1000.42em, 2.384em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-613"><span class="mi" id="MathJax-Span-614" style="font-family: MathJax_Math-italic;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-90">\varepsilon</script>/1000 etc.</p>
  <p>To prevent this kind of issue we impose only inequalities (<span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-91-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2265;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-615" style="width: 0.955em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.72em, 2.503em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-616"><span class="mo" id="MathJax-Span-617" style="font-family: MathJax_Main;">≥</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.211em; border-left: 0px solid; width: 0px; height: 1.075em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≥</mo></math></span></span><script type="math/tex" id="MathJax-Element-91">\ge</script>, <span class="MathJax_Preview" style=""></span><span class="MathJax" id="MathJax-Element-92-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2264;</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-618" style="width: 0.955em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.372em, 1000.72em, 2.503em, -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-619"><span class="mo" id="MathJax-Span-620" style="font-family: MathJax_Main;">≤</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.211em; border-left: 0px solid; width: 0px; height: 1.075em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≤</mo></math></span></span><script type="math/tex" id="MathJax-Element-92">\le</script>).</p>
  <h6 id="video-6"><a class="anchor" name="video-6" href="#video-6"><span class="octicon octicon-link"></span></a>(video 6)</h6>
  <p>Shows how to use PDDL+ to model the rover domain</p>
  <p>&nbsp;
  &nbsp;
  &nbsp;
  &nbsp;
  &nbsp;
  &nbsp;
  &nbsp;
  &nbsp;
  &nbsp;
  &nbsp;
  &nbsp;</p>
  </div><div id="_toc"><div class="_ul"><a href="#week-1-refresh-of-searching-algorithms">WEEK 1 (Refresh of searching algorithms)</a></div><div class="_ul"><div class="_ul"><a href="#searching-methods">Searching Methods</a></div></div><div class="_ul"><a href="#week-2">WEEK 2</a></div><div class="_ul"><div class="_ul"><a href="#ehc-enforced-hill-climbing">EHC (Enforced Hill Climbing)</a></div></div><div class="_ul"><div class="_ul"><a href="#landmarks-constraints-based-heuristic">Landmarks: Constraints-based heuristic</a></div></div><div class="_ul"><div class="_ul"><a href="#types-of-landmarks">Types of landmarks</a></div></div><div class="_ul"><div class="_ul"><a href="#finding-landmarks">Finding Landmarks</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#deletion-relaxation-with-rpg">Deletion relaxation with RPG</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#backchaining">Backchaining</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#rpg-propagation">RPG propagation</a></div></div></div><div class="_ul"><div class="_ul"><a href="#landmarks-ordering">Landmarks ordering</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#sound-ordering">Sound Ordering</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#unsound-orderings">Unsound Orderings</a></div></div></div><div class="_ul"><a href="#week-3-landmarks">WEEK 3 (Landmarks)</a></div><div class="_ul"><div class="_ul"><a href="#lm-count">LM Count</a></div></div><div class="_ul"><div class="_ul"><a href="#double-heuristic">Double Heuristic</a></div></div><div class="_ul"><div class="_ul"><a href="#problems-with-rpg">Problems With RPG</a></div></div><div class="_ul"><div class="_ul"><a href="#problems-with-ehc">Problems With EHC</a></div></div><div class="_ul"><div class="_ul"><a href="#identidem">IDENTIDEM</a></div></div><div class="_ul"><a href="#week-4---numerical-values-in-planning">Week 4 - Numerical Values in Planning</a></div><div class="_ul"><div class="_ul"><a href="#numerical-values-operations-video-1">Numerical Values Operations (Video 1)</a></div></div><div class="_ul"><div class="_ul"><a href="#rpg">RPG</a></div></div><div class="_ul"><div class="_ul"><a href="#oversubscription-video-2">Oversubscription (Video 2)</a></div></div><div class="_ul"><div class="_ul"><a href="#preferences">Preferences</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#sometimes-before-vs-sometimes-after">Sometimes-before vs. Sometimes-after</a></div></div></div><div class="_ul"><div class="_ul"><a href="#lprpg-p">LPRPG-P</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#lprpg-p-heuristic">LPRPG-P Heuristic</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><a href="#the-preferences-violation-set-of-a-subsequently-appearing-fact-is-the-violation-set-of-the-action-that-achieved-that-fact-and-the-union-of-the-violation-set-for-the-precondition-of-that-action">The preferences violation set of a subsequently appearing fact is the violation set of the action that achieved that fact and the Union of the violation set for the precondition of that action.</a></div></div></div></div></div></div><div class="_ul"><a href="#week-5---optimal-planning-first-part-is-continuous-of-week-3">Week 5 - Optimal Planning (first part is continuous of Week 3)</a></div><div class="_ul"><div class="_ul"><a href="#the-perils-of-expressivity-video-6-from-week-3">The Perils of Expressivity (video 6 from week 3)</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#--mutex-invariants">- Mutex (Invariants)</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#--finite-domain-representation-fdr">- Finite Domain Representation (FDR)</a></div></div></div><div class="_ul"><div class="_ul"><a href="#sas">SAS+</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#sas-operations-conditions">SAS+ Operations Conditions</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#data-transition-graph-dtg">Data Transition Graph (DTG)</a></div></div></div><div class="_ul"><div class="_ul"><a href="#pattern-databases-pdb-video-1-from-week-5">Pattern Databases (PDB) (video 1 from week 5)</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#abstraction">Abstraction</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#pros-and-cons-of-pdb">Pros and Cons of PDB</a></div></div></div><div class="_ul"><div class="_ul"><a href="#cost-partitioning-video-2-from-week-5">Cost Partitioning (video 2 from week 5)</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#optimal-cost-partitioning">Optimal Cost Partitioning</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#post-hoc-optimisation">Post Hoc Optimisation</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#greedy-zero-one-cost">Greedy Zero One Cost</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#saturated-cost-partitioning">Saturated Cost Partitioning</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#uniform-cost-partitioning">Uniform Cost Partitioning</a></div></div></div><div class="_ul"><div class="_ul"><a href="#graphplan-video-3-week-5">GraphPlan (video 3 week 5)</a></div></div><div class="_ul"><div class="_ul"><a href="#sat-in-planning-video-4-from-week-5">SAT in Planning (video 4 from week 5)</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#framing">Framing</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><a href="#explanatory-frame-axioms">Explanatory Frame Axioms</a></div></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><a href="#exclusion-axioms">Exclusion Axioms</a></div></div></div></div><div class="_ul"><a href="#week-6">Week 6</a></div><div class="_ul"><div class="_ul"><a href="#partial-ordering-planning---pop-video-1">Partial Ordering Planning - POP (video 1)</a></div></div><div class="_ul"><div class="_ul"><a href="#hierarchical-task-network---htnvideo-2">Hierarchical Task Network - HTN(video 2)</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#htn-is-updown-rather-than-backwardforward">HTN is Up/Down rather than Backward/Forward</a></div></div></div><div class="_ul"><div class="_ul"><a href="#planning-under-uncertainty-video-3">Planning under uncertainty (video 3)</a></div></div><div class="_ul"><a href="#week-7---temporal-planning">Week 7 - Temporal Planning</a></div><div class="_ul"><div class="_ul"><a href="#overlapping">Overlapping</a></div></div><div class="_ul"><div class="_ul"><a href="#snap-actions">Snap actions</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#1-decision-epoch-planning">1. Decision Epoch Planning</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#2-simple-temporal-problem-stp">2. Simple Temporal Problem (STP)</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><a href="#how-to-solve-a-simple-temporal-problem">How to solve a Simple Temporal Problem</a></div></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#stn">STN</a></div></div></div><div class="_ul"><div class="_ul"><a href="#crikey-3">Crikey 3</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#memoization">Memoization</a></div></div></div><div class="_ul"><div class="_ul"><a href="#stp-heuristic">STP Heuristic</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#solution-extraction">Solution Extraction</a></div></div></div><div class="_ul"><a href="#week-8---temporal-planning-ii">Week 8 - Temporal Planning (II)</a></div><div class="_ul"><div class="_ul"><a href="#popf">POPF</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#popf-details">POPF details</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#popf-in-action">POPF in action</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#what-happens-when-you-delete-effects">What happens when you delete effects</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#what-happens-when-you-add-effects">What happens when you add effects</a></div></div></div><div class="_ul"><div class="_ul"><a href="#safety-compression">Safety Compression</a></div></div><div class="_ul"><div class="_ul"><a href="#deadlines">Deadlines</a></div></div><div class="_ul"><div class="_ul"><a href="#reasoning-with-tils-in-forward-search">Reasoning with TILs in Forward Search</a></div></div><div class="_ul"><a href="#week-9---colin-continuous-linear-change">Week 9 - CoLin (Continuous Linear Change)</a></div><div class="_ul"><div class="_ul"><a href="#constraints-video-2">Constraints (video 2)</a></div></div><div class="_ul"><div class="_ul"><a href="#linearity-assumption">Linearity Assumption</a></div></div><div class="_ul"><div class="_ul"><a href="#objective-function">Objective Function</a></div></div><div class="_ul"><div class="_ul"><a href="#action-applicability">Action applicability</a></div></div><div class="_ul"><div class="_ul"><a href="#using-the-lp-to-find-bounds">Using the LP to find Bounds</a></div></div><div class="_ul"><div class="_ul"><a href="#optic-video-3">OPTIC (video 3)</a></div></div><div class="_ul"><div class="_ul"><a href="#mixed-integer-program-mip-and-big-m">Mixed Integer Program (MIP) and Big M</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><a href="#video-4-is-useless">(video 4 is useless)</a></div></div></div></div></div></div><div class="_ul"><div class="_ul"><a href="#pddl-video-5">PDDL+ (video 5)</a></div></div><div class="_ul"><div class="_ul"><a href="#possible-issues-with-pddl">Possible Issues with PDDL+</a></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#1-zeno-behaviour">1. Zeno Behaviour</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#2-cascading-events">2. Cascading Events</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><a href="#3-semantics-issue">3. Semantics Issue</a></div></div></div><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><div class="_ul"><a href="#video-6">(video 6)</a></div></div></div></div></div></div></div><script type="text/x-mathjax-config;executed=true">
    // TeX-AMS_HTML
    MathJax.Hub.Config({
      jax: [
        'input/TeX',
        'output/HTML-CSS',
        'output/PreviewHTML',
      ],
      extensions: [
        'tex2jax.js',
        'AssistiveMML.js',
        'a11y/accessibility-menu.js',
      ],
      TeX: {
        extensions: [
          'AMSmath.js',
          'AMSsymbols.js',
          'noErrors.js',
          'noUndefined.js',
        ]
      },
      tex2jax: {
        inlineMath: [
          ['$', '$'],
          ['\\(', '\\)'],
        ],
        displayMath: [
          ['$$', '$$'],
          ['\\[', '\\]'],
        ],
        processEscapes: true
      },
      showMathMenu: false,
      showProcessingMessages: false,
      messageStyle: 'none',
      skipStartupTypeset: true, // disable initial rendering
      positionToHash: false
    })
    // set specific container to render, can be delayed too
    MathJax.Hub.Queue(
      ['Typeset', MathJax.Hub, '_html']
    )
  </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js"></script><div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; min-width: 0px; max-width: none; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_AMS, monospace;"></div></div></body></html>